
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Albumentations provides a comprehensive, high-performance framework for augmenting images to improve machine learning models. Ideal for computer vision applications, supporting a wide range of augmentations.">
      
      
      
        <link rel="canonical" href="https://albumentations.ai/docs/api_reference/augmentations/transforms/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../blur/">
      
      
      <link rel="icon" href="../../../images/logo.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.12">
    
    
      
        <title>Transforms (augmentations.transforms) - Albumentations Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-DCXRDR9HJ0"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-DCXRDR9HJ0",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-DCXRDR9HJ0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    





<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta property="og:title" content="Albumentations Documentation - Transforms (augmentations.transforms)">
<meta property="og:description" content="Albumentations provides a comprehensive, high-performance framework for augmenting images to improve machine learning models. Ideal for computer vision applications, supporting a wide range of augmentations.">
<meta property="og:image" content="https://albumentations.ai/docs/images/albumentations_card.png">
<meta property="og:image:type" content="image/png">
<meta property="og:type" content="website">
<meta property="og:url" content="https://albumentations.ai/docs/api_reference/augmentations/transforms/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@albumentations">
<meta name="twitter:creator" content="@viglovikov">
<meta name="twitter:title" content="Albumentations Documentation - Transforms (augmentations.transforms)">
<meta name="twitter:description" content="Albumentations provides a comprehensive, high-performance framework for augmenting images to improve machine learning models. Ideal for computer vision applications, supporting a wide range of augmentations.">
<meta name="twitter:image" content="https://albumentations.ai/docs/images/albumentations_card.png">
<meta name="description" content="Albumentations provides a comprehensive, high-performance framework for augmenting images to improve machine learning models. Ideal for computer vision applications, supporting a wide range of augmentations.">
<meta name="keywords"
  content="Albumentations, image augmentation, machine learning, computer vision, data augmentation, image processing, deep learning, AI, artificial intelligence, Python">


  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="white">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transforms-augmentationstransforms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <header class="md-header" data-md-component="header">

  <nav class="md-header__inner md-grid" aria-label="header.title">
    <a href="../../.." title="Albumentations Documentation"
      class="md-header__button md-logo" aria-label="Albumentations Documentation" data-md-component="logo">
      
  <img src="../../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">

    </div>

    <div class="md-header-nav__title">
      <div class="header-menu-item">
        <a href="https://albumentations.ai">Home</a>
      </div>
      <div class="header-menu-item header-menu-item-selected">
        <a href="https://albumentations.ai/docs/">Documentation</a>
      </div>
      <div class="header-menu-item header-large-menu-item">
        <a href="https://albumentations.ai/whos_using">Who's using</a>
      </div>
      <div class="header-menu-item header-large-menu-item">
        <a href="https://demo.albumentations.ai" target="_blank">Demo</a>
      </div>
      <div class="header-menu-item header-large-menu-item">
        <a href="https://albumentations.ai/people">People</a>
      </div>
    </div>

    
<div class="md-search" data-md-component="search-query" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
    </form>
  </div>
</div>

    
    <div class="md-header__source">
      <a href="https://github.com/albumentations-team/albumentations" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    albumentations
  </div>
</a>
    </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          


<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
  <div class="md-sidebar__scrollwrap">
    <div class="md-sidebar__inner">
    </div>
  </div>
</div>


          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
<style>
  .highlight-ipynb {
    font-size: 0.7rem;
  }

  .jupyter-wrapper .jp-MarkdownOutput.jp-RenderedHTMLCommon {
    font-size: 0.8rem;
  }
</style>


<a href="https://github.com/albumentations-team/albumentations.ai/tree/main/mkdocs/src/docs/api_reference/augmentations/transforms.md"
  title="edit.link.title" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
</a>








<h1 id="transforms-augmentationstransforms">Transforms (augmentations.transforms)<a class="headerlink" href="#transforms-augmentationstransforms" title="Permanent link">¶</a></h1>
<div class="doc doc-object doc-module">
<a id="albumentations.augmentations.transforms"></a>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="CLAHE" id="albumentations.augmentations.transforms.CLAHE">
<code>class <strong>
CLAHE</strong></code>
<code>


    (clip_limit=4.0, tile_grid_size=(8, 8), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1414" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.CLAHE" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Apply Contrast Limited Adaptive Histogram Equalization to the input image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clip_limit</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>upper threshold value for contrast limiting.
If clip_limit is a single float value, the range will be (1, clip_limit). Default: (1, 4).</p></td>
</tr>
<tr>
<td><code>tile_grid_size</code></td>
<td><code>Tuple[int, int]</code></td>
<td><p>size of grid for histogram equalization. Default: (8, 8).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">CLAHE</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Apply Contrast Limited Adaptive Histogram Equalization to the input image.</span>

<span class="sd">    Args:</span>
<span class="sd">        clip_limit: upper threshold value for contrast limiting.</span>
<span class="sd">            If clip_limit is a single float value, the range will be (1, clip_limit). Default: (1, 4).</span>
<span class="sd">        tile_grid_size: size of grid for histogram equalization. Default: (8, 8).</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">clip_limit</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">,</span>
        <span class="n">tile_grid_size</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clip_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">clip_limit</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tile_grid_size</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">tile_grid_size</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">clip_limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"CLAHE transformation expects 1-channel or 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">clahe</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">clip_limit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tile_grid_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"clip_limit"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clip_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">clip_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"clip_limit"</span><span class="p">,</span> <span class="s2">"tile_grid_size"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ChannelShuffle" id="albumentations.augmentations.transforms.ChannelShuffle">
<code>class <strong>
ChannelShuffle</strong></code>
<code>
</code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1457" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ChannelShuffle" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly rearrange channels of the input RGB image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p</code></td>
<td></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ChannelShuffle</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly rearrange channels of the input RGB image.</span>

<span class="sd">    Args:</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">channels_shuffled</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">channel_shuffle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">channels_shuffled</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">ch_arr</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">ch_arr</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"channels_shuffled"</span><span class="p">:</span> <span class="n">ch_arr</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[()]:</span>
        <span class="k">return</span> <span class="p">()</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ColorJitter" id="albumentations.augmentations.transforms.ColorJitter">
<code>class <strong>
ColorJitter</strong></code>
<code>


    (brightness=0.2, contrast=0.2, saturation=0.2, hue=0.2, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1987" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ColorJitter" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly changes the brightness, contrast, and saturation of an image. Compared to ColorJitter from torchvision,
this transform gives a little bit different results because Pillow (used in torchvision) and OpenCV (used in
Albumentations) transform an image to HSV format by different formulas. Another difference - Pillow uses uint8
overflow, but we use value saturation.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>brightness</code></td>
<td><code>float or tuple of float (min, max</code></td>
<td><p>How much to jitter brightness.
brightness_factor is chosen uniformly from [max(0, 1 - brightness), 1 + brightness]
or the given [min, max]. Should be non negative numbers.</p></td>
</tr>
<tr>
<td><code>contrast</code></td>
<td><code>float or tuple of float (min, max</code></td>
<td><p>How much to jitter contrast.
contrast_factor is chosen uniformly from [max(0, 1 - contrast), 1 + contrast]
or the given [min, max]. Should be non negative numbers.</p></td>
</tr>
<tr>
<td><code>saturation</code></td>
<td><code>float or tuple of float (min, max</code></td>
<td><p>How much to jitter saturation.
saturation_factor is chosen uniformly from [max(0, 1 - saturation), 1 + saturation]
or the given [min, max]. Should be non negative numbers.</p></td>
</tr>
<tr>
<td><code>hue</code></td>
<td><code>float or tuple of float (min, max</code></td>
<td><p>How much to jitter hue.
hue_factor is chosen uniformly from [-hue, hue] or the given [min, max].
Should have 0 &lt;= hue &lt;= 0.5 or -0.5 &lt;= min &lt;= max &lt;= 0.5.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ColorJitter</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly changes the brightness, contrast, and saturation of an image. Compared to ColorJitter from torchvision,</span>
<span class="sd">    this transform gives a little bit different results because Pillow (used in torchvision) and OpenCV (used in</span>
<span class="sd">    Albumentations) transform an image to HSV format by different formulas. Another difference - Pillow uses uint8</span>
<span class="sd">    overflow, but we use value saturation.</span>

<span class="sd">    Args:</span>
<span class="sd">        brightness (float or tuple of float (min, max)): How much to jitter brightness.</span>
<span class="sd">            brightness_factor is chosen uniformly from [max(0, 1 - brightness), 1 + brightness]</span>
<span class="sd">            or the given [min, max]. Should be non negative numbers.</span>
<span class="sd">        contrast (float or tuple of float (min, max)): How much to jitter contrast.</span>
<span class="sd">            contrast_factor is chosen uniformly from [max(0, 1 - contrast), 1 + contrast]</span>
<span class="sd">            or the given [min, max]. Should be non negative numbers.</span>
<span class="sd">        saturation (float or tuple of float (min, max)): How much to jitter saturation.</span>
<span class="sd">            saturation_factor is chosen uniformly from [max(0, 1 - saturation), 1 + saturation]</span>
<span class="sd">            or the given [min, max]. Should be non negative numbers.</span>
<span class="sd">        hue (float or tuple of float (min, max)): How much to jitter hue.</span>
<span class="sd">            hue_factor is chosen uniformly from [-hue, hue] or the given [min, max].</span>
<span class="sd">            Should have 0 &lt;= hue &lt;= 0.5 or -0.5 &lt;= min &lt;= max &lt;= 0.5.</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">brightness</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">contrast</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">saturation</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">hue</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="o">=</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">brightness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">brightness</span><span class="p">,</span> <span class="s2">"brightness"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contrast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">contrast</span><span class="p">,</span> <span class="s2">"contrast"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">saturation</span><span class="p">,</span> <span class="s2">"saturation"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">hue</span><span class="p">,</span> <span class="s2">"hue"</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="n">clip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">F</span><span class="o">.</span><span class="n">adjust_brightness_torchvision</span><span class="p">,</span>
            <span class="n">F</span><span class="o">.</span><span class="n">adjust_contrast_torchvision</span><span class="p">,</span>
            <span class="n">F</span><span class="o">.</span><span class="n">adjust_saturation_torchvision</span><span class="p">,</span>
            <span class="n">F</span><span class="o">.</span><span class="n">adjust_hue_torchvision</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__check_values</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">ScaleFloatType</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)),</span>
        <span class="n">clip</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"If </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is a single number, it must be non negative."</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">offset</span> <span class="o">-</span> <span class="n">value</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">value</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">clip</span><span class="p">:</span>
                <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="n">TWO</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> values should be between </span><span class="si">{</span><span class="n">bounds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> should be a single number or a list/tuple with length 2."</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">brightness</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">brightness</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">contrast</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contrast</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">contrast</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">saturation</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saturation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">saturation</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">hue</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hue</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">hue</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"brightness"</span><span class="p">:</span> <span class="n">brightness</span><span class="p">,</span>
            <span class="s2">"contrast"</span><span class="p">:</span> <span class="n">contrast</span><span class="p">,</span>
            <span class="s2">"saturation"</span><span class="p">:</span> <span class="n">saturation</span><span class="p">,</span>
            <span class="s2">"hue"</span><span class="p">:</span> <span class="n">hue</span><span class="p">,</span>
            <span class="s2">"order"</span><span class="p">:</span> <span class="n">order</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">brightness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">contrast</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">saturation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">hue</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">order</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"ColorJitter transformation expects 1-channel or 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">color_transforms</span> <span class="o">=</span> <span class="p">[</span><span class="n">brightness</span><span class="p">,</span> <span class="n">contrast</span><span class="p">,</span> <span class="n">saturation</span><span class="p">,</span> <span class="n">hue</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transforms</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">img</span><span class="p">,</span> <span class="n">color_transforms</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># type: ignore[operator]</span>
        <span class="k">return</span> <span class="n">img</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"brightness"</span><span class="p">,</span> <span class="s2">"contrast"</span><span class="p">,</span> <span class="s2">"saturation"</span><span class="p">,</span> <span class="s2">"hue"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Downscale" id="albumentations.augmentations.transforms.Downscale">
<code>class <strong>
Downscale</strong></code>
<code>


    (scale_min=0.25, scale_max=0.25, interpolation=None, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1714" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Downscale" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Decreases image quality by downscaling and upscaling back.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scale_min</code></td>
<td><code>float</code></td>
<td><p>lower bound on the image scale. Should be &lt; 1.</p></td>
</tr>
<tr>
<td><code>scale_max</code></td>
<td><code>float</code></td>
<td><p>lower bound on the image scale. Should be .</p></td>
</tr>
<tr>
<td><code>interpolation</code></td>
<td><code>Union[int, albumentations.core.transforms_interface.Interpolation, Dict[str, int]]</code></td>
<td><p>cv2 interpolation method. Could be:
- single cv2 interpolation flag - selected method will be used for downscale and upscale.
- dict(downscale=flag, upscale=flag)
- Downscale.Interpolation(downscale=flag, upscale=flag) -
Default: Interpolation(downscale=cv2.INTER_NEAREST, upscale=cv2.INTER_NEAREST)</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Downscale</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Decreases image quality by downscaling and upscaling back.</span>

<span class="sd">    Args:</span>
<span class="sd">        scale_min: lower bound on the image scale. Should be &lt; 1.</span>
<span class="sd">        scale_max:  lower bound on the image scale. Should be .</span>
<span class="sd">        interpolation: cv2 interpolation method. Could be:</span>
<span class="sd">            - single cv2 interpolation flag - selected method will be used for downscale and upscale.</span>
<span class="sd">            - dict(downscale=flag, upscale=flag)</span>
<span class="sd">            - Downscale.Interpolation(downscale=flag, upscale=flag) -</span>
<span class="sd">            Default: Interpolation(downscale=cv2.INTER_NEAREST, upscale=cv2.INTER_NEAREST)</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">scale_min</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="n">scale_max</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="n">interpolation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Interpolation</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">interpolation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">Interpolation</span><span class="p">(</span><span class="n">downscale</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">INTER_NEAREST</span><span class="p">,</span> <span class="n">upscale</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">INTER_NEAREST</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">"Using default interpolation INTER_NEAREST, which is sub-optimal."</span>
                <span class="s2">"Please specify interpolation mode for downscale and upscale explicitly."</span>
                <span class="s2">"For additional information see this PR https://github.com/albumentations-team/albumentations/pull/584"</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interpolation</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">Interpolation</span><span class="p">(</span><span class="n">downscale</span><span class="o">=</span><span class="n">interpolation</span><span class="p">,</span> <span class="n">upscale</span><span class="o">=</span><span class="n">interpolation</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interpolation</span><span class="p">,</span> <span class="n">Interpolation</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">interpolation</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">Interpolation</span><span class="p">(</span><span class="o">**</span><span class="n">interpolation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"Wrong interpolation data type. Supported types: `Optional[Union[int, Interpolation, Dict[str, int]]]`."</span>
                <span class="sa">f</span><span class="s2">" Got: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">interpolation</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">scale_min</span> <span class="o">&gt;</span> <span class="n">scale_max</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Expected scale_min be less or equal scale_max, got </span><span class="si">{</span><span class="n">scale_min</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">scale_max</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scale_max</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Expected scale_max to be less than 1, got </span><span class="si">{</span><span class="n">scale_max</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale_min</span> <span class="o">=</span> <span class="n">scale_min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale_max</span> <span class="o">=</span> <span class="n">scale_max</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Should not be here, added for typing purposes. Please report this issue."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">downscale</span><span class="p">(</span>
            <span class="n">img</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">down_interpolation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="o">.</span><span class="n">downscale</span><span class="p">,</span>
            <span class="n">up_interpolation</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="o">.</span><span class="n">upscale</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"scale"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale_max</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">"scale_min"</span><span class="p">,</span> <span class="s2">"scale_max"</span>

    <span class="k">def</span> <span class="nf">to_dict_private</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Should not be here, added for typing purposes. Please report this issue."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict_private</span><span class="p">()</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">"interpolation"</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"upscale"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="o">.</span><span class="n">upscale</span><span class="p">,</span> <span class="s2">"downscale"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="o">.</span><span class="n">downscale</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Emboss" id="albumentations.augmentations.transforms.Emboss">
<code>class <strong>
Emboss</strong></code>
<code>


    (alpha=(0.2, 0.5), strength=(0.2, 0.7), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2143" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Emboss" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Emboss the input image and overlays the result with the original image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alpha</code></td>
<td><code>Tuple[float, float]</code></td>
<td><p>range to choose the visibility of the embossed image. At 0, only the original image is
visible,at 1.0 only its embossed version is visible. Default: (0.2, 0.5).</p></td>
</tr>
<tr>
<td><code>strength</code></td>
<td><code>Tuple[float, float]</code></td>
<td><p>strength range of the embossing. Default: (0.2, 0.7).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Emboss</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Emboss the input image and overlays the result with the original image.</span>

<span class="sd">    Args:</span>
<span class="sd">        alpha: range to choose the visibility of the embossed image. At 0, only the original image is</span>
<span class="sd">            visible,at 1.0 only its embossed version is visible. Default: (0.2, 0.5).</span>
<span class="sd">        strength: strength range of the embossing. Default: (0.2, 0.7).</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">alpha</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="n">strength</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"alpha"</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">strength</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"strength"</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__check_values</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">))</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> values should be between </span><span class="si">{</span><span class="n">bounds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__generate_emboss_matrix</span><span class="p">(</span><span class="n">alpha_sample</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">strength_sample</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">matrix_nochange</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">matrix_effect</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">strength_sample</span><span class="p">,</span> <span class="mi">0</span> <span class="o">-</span> <span class="n">strength_sample</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                <span class="p">[</span><span class="mi">0</span> <span class="o">-</span> <span class="n">strength_sample</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">strength_sample</span><span class="p">],</span>
                <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">strength_sample</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">strength_sample</span><span class="p">],</span>
            <span class="p">],</span>
            <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha_sample</span><span class="p">)</span> <span class="o">*</span> <span class="n">matrix_nochange</span> <span class="o">+</span> <span class="n">alpha_sample</span> <span class="o">*</span> <span class="n">matrix_effect</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span>
        <span class="n">strength</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">strength</span><span class="p">)</span>
        <span class="n">emboss_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__generate_emboss_matrix</span><span class="p">(</span><span class="n">alpha_sample</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">strength_sample</span><span class="o">=</span><span class="n">strength</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"emboss_matrix"</span><span class="p">:</span> <span class="n">emboss_matrix</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">emboss_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">emboss_matrix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"alpha"</span><span class="p">,</span> <span class="s2">"strength"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Equalize" id="albumentations.augmentations.transforms.Equalize">
<code>class <strong>
Equalize</strong></code>
<code>


    (mode='cv', by_channels=True, mask=None, mask_params=(), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1143" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Equalize" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Equalize the image histogram.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mode</code></td>
<td><code>str</code></td>
<td><p>{'cv', 'pil'}. Use OpenCV or Pillow equalization method.</p></td>
</tr>
<tr>
<td><code>by_channels</code></td>
<td><code>bool</code></td>
<td><p>If True, use equalization by channels separately,
else convert image to YCbCr representation and use equalization by <code>Y</code> channel.</p></td>
</tr>
<tr>
<td><code>mask</code></td>
<td><code>np.ndarray, callable</code></td>
<td><p>If given, only the pixels selected by
the mask are included in the analysis. Maybe 1 channel or 3 channel array or callable.
Function signature must include <code>image</code> argument.</p></td>
</tr>
<tr>
<td><code>mask_params</code></td>
<td><code>list of str</code></td>
<td><p>Params for mask function.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Equalize</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Equalize the image histogram.</span>

<span class="sd">    Args:</span>
<span class="sd">        mode (str): {'cv', 'pil'}. Use OpenCV or Pillow equalization method.</span>
<span class="sd">        by_channels (bool): If True, use equalization by channels separately,</span>
<span class="sd">            else convert image to YCbCr representation and use equalization by `Y` channel.</span>
<span class="sd">        mask (np.ndarray, callable): If given, only the pixels selected by</span>
<span class="sd">            the mask are included in the analysis. Maybe 1 channel or 3 channel array or callable.</span>
<span class="sd">            Function signature must include `image` argument.</span>
<span class="sd">        mask_params (list of str): Params for mask function.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">ImageMode</span> <span class="o">=</span> <span class="s2">"cv"</span><span class="p">,</span>
        <span class="n">by_channels</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask_params</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[()]</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">image_modes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported equalization mode. Supports: </span><span class="si">{</span><span class="n">image_modes</span><span class="si">}</span><span class="s2">. "</span> <span class="sa">f</span><span class="s2">"Got: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">by_channels</span> <span class="o">=</span> <span class="n">by_channels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mask_params</span> <span class="o">=</span> <span class="n">mask_params</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">equalize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="n">by_channels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">by_channels</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">"mask"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"mask"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">,</span> <span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mask_params</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"mode"</span><span class="p">,</span> <span class="s2">"by_channels"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="FancyPCA" id="albumentations.augmentations.transforms.FancyPCA">
<code>class <strong>
FancyPCA</strong></code>
<code>


    (alpha=0.1, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1951" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.FancyPCA" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Augment RGB image using FancyPCA from Krizhevsky's paper
"ImageNet Classification with Deep Convolutional Neural Networks"</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alpha</code></td>
<td><code>float</code></td>
<td><p>how much to perturb/scale the eigen vecs and vals.
scale is samples from gaussian distribution (mu=0, sigma=alpha)</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    3-channel uint8 images only</p>
<div class="admonition credit">
<p class="admonition-title">Credit</p>
<p><a href="http://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf" target="_blank">http://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf</a>
<a href="https://deshanadesai.github.io/notes/Fancy-PCA-with-Scikit-Image" target="_blank">https://deshanadesai.github.io/notes/Fancy-PCA-with-Scikit-Image</a>
<a href="https://pixelatedbrian.github.io/2018-04-29-fancy_pca/" target="_blank">https://pixelatedbrian.github.io/2018-04-29-fancy_pca/</a></p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">FancyPCA</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Augment RGB image using FancyPCA from Krizhevsky's paper</span>
<span class="sd">    "ImageNet Classification with Deep Convolutional Neural Networks"</span>

<span class="sd">    Args:</span>
<span class="sd">        alpha:  how much to perturb/scale the eigen vecs and vals.</span>
<span class="sd">            scale is samples from gaussian distribution (mu=0, sigma=alpha)</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        3-channel uint8 images only</span>

<span class="sd">    Credit:</span>
<span class="sd">        http://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf</span>
<span class="sd">        https://deshanadesai.github.io/notes/Fancy-PCA-with-Scikit-Image</span>
<span class="sd">        https://pixelatedbrian.github.io/2018-04-29-fancy_pca/</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="o">=</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">fancy_pca</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"alpha"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"alpha"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="FromFloat" id="albumentations.augmentations.transforms.FromFloat">
<code>class <strong>
FromFloat</strong></code>
<code>


    (dtype='uint16', max_value=None, always_apply=False, p=1.0)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1680" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.FromFloat" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Take an input array where all values should lie in the range [0, 1.0], multiply them by <code>max_value</code> and then
cast the resulted value to a type specified by <code>dtype</code>. If <code>max_value</code> is None the transform will try to infer
the maximum value for the data type from the <code>dtype</code> argument.</p>
<p>This is the inverse transform for :class:<code>~albumentations.augmentations.transforms.ToFloat</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>max_value</code></td>
<td><code>Optional[float]</code></td>
<td><p>maximum possible input value. Default: None.</p></td>
</tr>
<tr>
<td><code>dtype</code></td>
<td><code>str</code></td>
<td><p>data type of the output. See the <code>'Data types' page from the NumPy docs</code>_.
Default: 'uint16'.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 1.0.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    float32</p>
<p>.. _'Data types' page from the NumPy docs:
   <a href="https://docs.scipy.org/doc/numpy/user/basics.types.html" target="_blank">https://docs.scipy.org/doc/numpy/user/basics.types.html</a></p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">FromFloat</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Take an input array where all values should lie in the range [0, 1.0], multiply them by `max_value` and then</span>
<span class="sd">    cast the resulted value to a type specified by `dtype`. If `max_value` is None the transform will try to infer</span>
<span class="sd">    the maximum value for the data type from the `dtype` argument.</span>

<span class="sd">    This is the inverse transform for :class:`~albumentations.augmentations.transforms.ToFloat`.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_value: maximum possible input value. Default: None.</span>
<span class="sd">        dtype: data type of the output. See the `'Data types' page from the NumPy docs`_.</span>
<span class="sd">            Default: 'uint16'.</span>
<span class="sd">        p: probability of applying the transform. Default: 1.0.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        float32</span>

<span class="sd">    .. _'Data types' page from the NumPy docs:</span>
<span class="sd">       https://docs.scipy.org/doc/numpy/user/basics.types.html</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"uint16"</span><span class="p">,</span> <span class="n">max_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span> <span class="o">=</span> <span class="n">max_value</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">from_float</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"dtype"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">"max_value"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span><span class="p">}</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="GaussNoise" id="albumentations.augmentations.transforms.GaussNoise">
<code>class <strong>
GaussNoise</strong></code>
<code>


    (var_limit=(10.0, 50.0), mean=0, per_channel=True, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1293" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.GaussNoise" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Apply gaussian noise to the input image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>var_limit</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>variance range for noise. If var_limit is a single float, the range
will be (0, var_limit). Default: (10.0, 50.0).</p></td>
</tr>
<tr>
<td><code>mean</code></td>
<td><code>float</code></td>
<td><p>mean of the noise. Default: 0</p></td>
</tr>
<tr>
<td><code>per_channel</code></td>
<td><code>bool</code></td>
<td><p>if set to True, noise will be sampled for each channel independently.
Otherwise, the noise will be sampled once for all channels. Default: True</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">GaussNoise</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Apply gaussian noise to the input image.</span>

<span class="sd">    Args:</span>
<span class="sd">        var_limit: variance range for noise. If var_limit is a single float, the range</span>
<span class="sd">            will be (0, var_limit). Default: (10.0, 50.0).</span>
<span class="sd">        mean: mean of the noise. Default: 0</span>
<span class="sd">        per_channel: if set to True, noise will be sampled for each channel independently.</span>
<span class="sd">            Otherwise, the noise will be sampled once for all channels. Default: True</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">var_limit</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span>
        <span class="n">mean</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">per_channel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var_limit</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">var_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Lower var_limit should be non negative."</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">var_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Upper var_limit should be non negative."</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">var_limit</span> <span class="o">=</span> <span class="n">var_limit</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">var_limit</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">var_limit</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">"var_limit should be non negative."</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">var_limit</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">var_limit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Expected var_limit type to be one of (int, float, tuple, list), got </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">var_limit</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span> <span class="o">=</span> <span class="n">per_channel</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">gauss</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">gauss_noise</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">gauss</span><span class="o">=</span><span class="n">gauss</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">var</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">var_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">var_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">sigma</span> <span class="o">=</span> <span class="n">var</span><span class="o">**</span><span class="mf">0.5</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span><span class="p">:</span>
            <span class="n">gauss</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gauss</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">sigma</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="n">THREE</span><span class="p">:</span>
                <span class="n">gauss</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">gauss</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"gauss"</span><span class="p">:</span> <span class="n">gauss</span><span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"var_limit"</span><span class="p">,</span> <span class="s2">"per_channel"</span><span class="p">,</span> <span class="s2">"mean"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="HueSaturationValue" id="albumentations.augmentations.transforms.HueSaturationValue">
<code>class <strong>
HueSaturationValue</strong></code>
<code>


    (hue_shift_limit=20, sat_shift_limit=30, val_shift_limit=20, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1008" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.HueSaturationValue" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly change hue, saturation and value of the input image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hue_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing hue. If hue_shift_limit is a single int, the range
will be (-hue_shift_limit, hue_shift_limit). Default: (-20, 20).</p></td>
</tr>
<tr>
<td><code>sat_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing saturation. If sat_shift_limit is a single int,
the range will be (-sat_shift_limit, sat_shift_limit). Default: (-30, 30).</p></td>
</tr>
<tr>
<td><code>val_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing value. If val_shift_limit is a single int, the range
will be (-val_shift_limit, val_shift_limit). Default: (-20, 20).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">HueSaturationValue</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly change hue, saturation and value of the input image.</span>

<span class="sd">    Args:</span>
<span class="sd">        hue_shift_limit: range for changing hue. If hue_shift_limit is a single int, the range</span>
<span class="sd">            will be (-hue_shift_limit, hue_shift_limit). Default: (-20, 20).</span>
<span class="sd">        sat_shift_limit: range for changing saturation. If sat_shift_limit is a single int,</span>
<span class="sd">            the range will be (-sat_shift_limit, sat_shift_limit). Default: (-30, 30).</span>
<span class="sd">        val_shift_limit: range for changing value. If val_shift_limit is a single int, the range</span>
<span class="sd">            will be (-val_shift_limit, val_shift_limit). Default: (-20, 20).</span>
<span class="sd">        p (float): probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">hue_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">sat_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
        <span class="n">val_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hue_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">hue_shift_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sat_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">sat_shift_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">val_shift_limit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">hue_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sat_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">val_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"HueSaturationValue transformation expects 1-channel or 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">shift_hsv</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">hue_shift</span><span class="p">,</span> <span class="n">sat_shift</span><span class="p">,</span> <span class="n">val_shift</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"hue_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hue_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">hue_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"sat_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sat_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">sat_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"val_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">val_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">val_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"hue_shift_limit"</span><span class="p">,</span> <span class="s2">"sat_shift_limit"</span><span class="p">,</span> <span class="s2">"val_shift_limit"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ISONoise" id="albumentations.augmentations.transforms.ISONoise">
<code>class <strong>
ISONoise</strong></code>
<code>


    (color_shift=(0.01, 0.05), intensity=(0.1, 0.5), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1365" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ISONoise" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Apply camera sensor noise.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>color_shift</code></td>
<td><code>float, float</code></td>
<td><p>variance range for color hue change.
Measured as a fraction of 360 degree Hue angle in HLS colorspace.</p></td>
</tr>
<tr>
<td><code>intensity</code></td>
<td><code>float, float</code></td>
<td><p>Multiplicative factor that control strength
of color and luminace noise.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ISONoise</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Apply camera sensor noise.</span>

<span class="sd">    Args:</span>
<span class="sd">        color_shift (float, float): variance range for color hue change.</span>
<span class="sd">            Measured as a fraction of 360 degree Hue angle in HLS colorspace.</span>
<span class="sd">        intensity ((float, float): Multiplicative factor that control strength</span>
<span class="sd">            of color and luminace noise.</span>
<span class="sd">        p (float): probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">color_shift</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">),</span>
        <span class="n">intensity</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity</span> <span class="o">=</span> <span class="n">intensity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_shift</span> <span class="o">=</span> <span class="n">color_shift</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">color_shift</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">,</span>
        <span class="n">intensity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">random_state</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">iso_noise</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">color_shift</span><span class="p">,</span> <span class="n">intensity</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">random_state</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"color_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_shift</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_shift</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"intensity"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intensity</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">intensity</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"random_state"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65536</span><span class="p">),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"intensity"</span><span class="p">,</span> <span class="s2">"color_shift"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ImageCompression" id="albumentations.augmentations.transforms.ImageCompression">
<code>class <strong>
ImageCompression</strong></code>
<code>


    (quality_lower=99, quality_upper=100, compression_type=&lt;ImageCompressionType.JPEG: 0&gt;, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L252" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ImageCompression" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Decreases image quality by Jpeg, WebP compression of an image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>quality_lower</code></td>
<td><code>int</code></td>
<td><p>lower bound on the image quality. Should be in [0, 100] range for jpeg and [1, 100] for webp.</p></td>
</tr>
<tr>
<td><code>quality_upper</code></td>
<td><code>int</code></td>
<td><p>upper bound on the image quality. Should be in [0, 100] range for jpeg and [1, 100] for webp.</p></td>
</tr>
<tr>
<td><code>compression_type</code></td>
<td><code>ImageCompressionType</code></td>
<td><p>should be ImageCompressionType.JPEG or ImageCompressionType.WEBP.
Default: ImageCompressionType.JPEG</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ImageCompression</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Decreases image quality by Jpeg, WebP compression of an image.</span>

<span class="sd">    Args:</span>
<span class="sd">        quality_lower: lower bound on the image quality. Should be in [0, 100] range for jpeg and [1, 100] for webp.</span>
<span class="sd">        quality_upper: upper bound on the image quality. Should be in [0, 100] range for jpeg and [1, 100] for webp.</span>
<span class="sd">        compression_type (ImageCompressionType): should be ImageCompressionType.JPEG or ImageCompressionType.WEBP.</span>
<span class="sd">            Default: ImageCompressionType.JPEG</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">class</span> <span class="nc">ImageCompressionType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Defines the types of image compression.</span>

<span class="sd">        This Enum class is used to specify the image compression format.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            JPEG (int): Represents the JPEG image compression format.</span>
<span class="sd">            WEBP (int): Represents the WEBP image compression format.</span>

<span class="sd">        """</span>

        <span class="n">JPEG</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">WEBP</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">quality_lower</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">99</span><span class="p">,</span>
        <span class="n">quality_upper</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">compression_type</span><span class="p">:</span> <span class="n">ImageCompressionType</span> <span class="o">=</span> <span class="n">ImageCompressionType</span><span class="o">.</span><span class="n">JPEG</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compression_type</span> <span class="o">=</span> <span class="n">ImageCompression</span><span class="o">.</span><span class="n">ImageCompressionType</span><span class="p">(</span><span class="n">compression_type</span><span class="p">)</span>
        <span class="n">low_thresh_quality_assert</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression_type</span> <span class="o">==</span> <span class="n">ImageCompression</span><span class="o">.</span><span class="n">ImageCompressionType</span><span class="o">.</span><span class="n">WEBP</span><span class="p">:</span>
            <span class="n">low_thresh_quality_assert</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">low_thresh_quality_assert</span> <span class="o">&lt;=</span> <span class="n">quality_lower</span> <span class="o">&lt;=</span> <span class="n">HUNDRED</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid quality_lower. Got: </span><span class="si">{</span><span class="n">quality_lower</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">low_thresh_quality_assert</span> <span class="o">&lt;=</span> <span class="n">quality_upper</span> <span class="o">&lt;=</span> <span class="n">HUNDRED</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid quality_upper. Got: </span><span class="si">{</span><span class="n">quality_upper</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">quality_lower</span> <span class="o">=</span> <span class="n">quality_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quality_upper</span> <span class="o">=</span> <span class="n">quality_upper</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">quality</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">image_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">".jpg"</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="n">TWO</span> <span class="ow">and</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"ImageCompression transformation expects 1, 3 or 4 channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">image_compression</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">quality</span><span class="p">,</span> <span class="n">image_type</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">image_type</span> <span class="o">=</span> <span class="s2">".jpg"</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression_type</span> <span class="o">==</span> <span class="n">ImageCompression</span><span class="o">.</span><span class="n">ImageCompressionType</span><span class="o">.</span><span class="n">WEBP</span><span class="p">:</span>
            <span class="n">image_type</span> <span class="o">=</span> <span class="s2">".webp"</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"quality"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quality_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">quality_upper</span><span class="p">),</span>
            <span class="s2">"image_type"</span><span class="p">:</span> <span class="n">image_type</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"quality_lower"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quality_lower</span><span class="p">,</span>
            <span class="s2">"quality_upper"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quality_upper</span><span class="p">,</span>
            <span class="s2">"compression_type"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div>
</details>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" data-toc-label="ImageCompressionType" id="albumentations.augmentations.transforms.ImageCompression.ImageCompressionType">
<code>class <strong>
ImageCompressionType</strong></code>
<code>
</code> <a class="headerlink" href="#albumentations.augmentations.transforms.ImageCompression.ImageCompressionType" title="Permanent link">¶</a>
</h3>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Defines the types of image compression.</p>
<p>This Enum class is used to specify the image compression format.</p>
<p><strong>Attributes:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>JPEG</code></td>
<td><code>int</code></td>
<td><p>Represents the JPEG image compression format.</p></td>
</tr>
<tr>
<td><code>WEBP</code></td>
<td><code>int</code></td>
<td><p>Represents the WEBP image compression format.</p></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ImageCompressionType</span><span class="p">(</span><span class="n">IntEnum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Defines the types of image compression.</span>

<span class="sd">    This Enum class is used to specify the image compression format.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        JPEG (int): Represents the JPEG image compression format.</span>
<span class="sd">        WEBP (int): Represents the WEBP image compression format.</span>

<span class="sd">    """</span>

    <span class="n">JPEG</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">WEBP</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="InvertImg" id="albumentations.augmentations.transforms.InvertImg">
<code>class <strong>
InvertImg</strong></code>
<code>
</code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1485" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.InvertImg" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Invert the input image by subtracting pixel values from max values of the image types,
i.e., 255 for uint8 and 1.0 for float32.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p</code></td>
<td></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">InvertImg</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Invert the input image by subtracting pixel values from max values of the image types,</span>
<span class="sd">    i.e., 255 for uint8 and 1.0 for float32.</span>

<span class="sd">    Args:</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[()]:</span>
        <span class="k">return</span> <span class="p">()</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Lambda" id="albumentations.augmentations.transforms.Lambda">
<code>class <strong>
Lambda</strong></code>
<code>


    (image=None, mask=None, keypoint=None, bbox=None, global_label=None, name=None, always_apply=False, p=1.0)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1796" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Lambda" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>A flexible transformation class for using user-defined transformation functions per targets.
Function signature must include **kwargs to accept optional arguments like interpolation method, image size, etc:</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>image</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>Image transformation function.</p></td>
</tr>
<tr>
<td><code>mask</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>Mask transformation function.</p></td>
</tr>
<tr>
<td><code>keypoint</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>Keypoint transformation function.</p></td>
</tr>
<tr>
<td><code>bbox</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>BBox transformation function.</p></td>
</tr>
<tr>
<td><code>global_label</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>Global label transformation function.</p></td>
</tr>
<tr>
<td><code>always_apply</code></td>
<td><code>bool</code></td>
<td><p>Indicates whether this transformation should be always applied.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 1.0.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image, mask, bboxes, keypoints, global_label</p>
</div>
<p>Image types:
    Any</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Lambda</span><span class="p">(</span><span class="n">NoOp</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""A flexible transformation class for using user-defined transformation functions per targets.</span>
<span class="sd">    Function signature must include **kwargs to accept optional arguments like interpolation method, image size, etc:</span>

<span class="sd">    Args:</span>
<span class="sd">        image: Image transformation function.</span>
<span class="sd">        mask: Mask transformation function.</span>
<span class="sd">        keypoint: Keypoint transformation function.</span>
<span class="sd">        bbox: BBox transformation function.</span>
<span class="sd">        global_label: Global label transformation function.</span>
<span class="sd">        always_apply: Indicates whether this transformation should be always applied.</span>
<span class="sd">        p: probability of applying the transform. Default: 1.0.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image, mask, bboxes, keypoints, global_label</span>

<span class="sd">    Image types:</span>
<span class="sd">        Any</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">image</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">keypoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bbox</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">global_label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">target_name</span><span class="p">:</span> <span class="n">F</span><span class="o">.</span><span class="n">noop</span> <span class="k">for</span> <span class="n">target_name</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">"image"</span><span class="p">,</span> <span class="s2">"mask"</span><span class="p">,</span> <span class="s2">"keypoint"</span><span class="p">,</span> <span class="s2">"bbox"</span><span class="p">,</span> <span class="s2">"global_label"</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">target_name</span><span class="p">,</span> <span class="n">custom_apply_fn</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="s2">"image"</span><span class="p">:</span> <span class="n">image</span><span class="p">,</span>
            <span class="s2">"mask"</span><span class="p">:</span> <span class="n">mask</span><span class="p">,</span>
            <span class="s2">"keypoint"</span><span class="p">:</span> <span class="n">keypoint</span><span class="p">,</span>
            <span class="s2">"bbox"</span><span class="p">:</span> <span class="n">bbox</span><span class="p">,</span>
            <span class="s2">"global_label"</span><span class="p">:</span> <span class="n">global_label</span><span class="p">,</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">custom_apply_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">custom_apply_fn</span><span class="p">,</span> <span class="n">LambdaType</span><span class="p">)</span> <span class="ow">and</span> <span class="n">custom_apply_fn</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"&lt;lambda&gt;"</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s2">"Using lambda is incompatible with multiprocessing. "</span>
                        <span class="s2">"Consider using regular functions or partial()."</span>
                    <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="n">target_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">custom_apply_fn</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="s2">"mask"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">:</span> <span class="n">BoxInternalType</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BoxInternalType</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="s2">"bbox"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_keypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keypoint</span><span class="p">:</span> <span class="n">KeypointInternalType</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KeypointInternalType</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="s2">"keypoint"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">keypoint</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_global_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="p">[</span><span class="s2">"global_label"</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fn</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_serializable</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">to_dict_private</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">"To make a Lambda transform serializable you should provide the `name` argument, "</span>
                <span class="s2">"e.g. `Lambda(name='my_transform', image=&lt;some func&gt;, ...)`."</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"__class_fullname__"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_class_fullname</span><span class="p">(),</span> <span class="s2">"__name__"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
        <span class="n">state</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">custom_apply_fns</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>  <span class="c1"># type: ignore[arg-type]</span>
        <span class="n">state</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_base_init_args</span><span class="p">())</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">format_args</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="si">}</span><span class="s2">)"</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="MultiplicativeNoise" id="albumentations.augmentations.transforms.MultiplicativeNoise">
<code>class <strong>
MultiplicativeNoise</strong></code>
<code>


    (multiplier=(0.9, 1.1), per_channel=False, elementwise=False, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1888" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.MultiplicativeNoise" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Multiply image to random number or array of numbers.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>multiplier</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>If single float image will be multiplied to this number.
If tuple of float multiplier will be in range <code>[multiplier[0], multiplier[1])</code>. Default: (0.9, 1.1).</p></td>
</tr>
<tr>
<td><code>per_channel</code></td>
<td><code>bool</code></td>
<td><p>If <code>False</code>, same values for all channels will be used.
If <code>True</code> use sample values for each channels. Default False.</p></td>
</tr>
<tr>
<td><code>elementwise</code></td>
<td><code>bool</code></td>
<td><p>If <code>False</code> multiply multiply all pixels in an image with a random value sampled once.
If <code>True</code> Multiply image pixels with values that are pixelwise randomly sampled. Default: False.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    Any</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">MultiplicativeNoise</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Multiply image to random number or array of numbers.</span>

<span class="sd">    Args:</span>
<span class="sd">        multiplier: If single float image will be multiplied to this number.</span>
<span class="sd">            If tuple of float multiplier will be in range `[multiplier[0], multiplier[1])`. Default: (0.9, 1.1).</span>
<span class="sd">        per_channel: If `False`, same values for all channels will be used.</span>
<span class="sd">            If `True` use sample values for each channels. Default False.</span>
<span class="sd">        elementwise: If `False` multiply multiply all pixels in an image with a random value sampled once.</span>
<span class="sd">            If `True` Multiply image pixels with values that are pixelwise randomly sampled. Default: False.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        Any</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">multiplier</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span>
        <span class="n">per_channel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">elementwise</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">multiplier</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span> <span class="o">=</span> <span class="n">per_channel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="o">=</span> <span class="n">elementwise</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">]),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">"multiplier"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">[</span><span class="mi">0</span><span class="p">]])}</span>

        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">num_channels</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">else</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span> <span class="k">else</span> <span class="mi">1</span>

        <span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">num_channels</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">elementwise</span> <span class="k">else</span> <span class="p">[</span><span class="n">num_channels</span><span class="p">]</span>

        <span class="n">multiplier</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="ow">and</span> <span class="n">img</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="n">TWO</span><span class="p">:</span>
            <span class="n">multiplier</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">multiplier</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"multiplier"</span><span class="p">:</span> <span class="n">multiplier</span><span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">"multiplier"</span><span class="p">,</span> <span class="s2">"per_channel"</span><span class="p">,</span> <span class="s2">"elementwise"</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Normalize" id="albumentations.augmentations.transforms.Normalize">
<code>class <strong>
Normalize</strong></code>
<code>


    (mean=(0.485, 0.456, 0.406), std=(0.229, 0.224, 0.225), max_pixel_value=255.0, always_apply=False, p=1.0)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L215" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Normalize" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Normalization is applied by the formula: <code>img = (img - mean * max_pixel_value) / (std * max_pixel_value)</code></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mean</code></td>
<td><code>Union[float, Sequence[float]]</code></td>
<td><p>mean values</p></td>
</tr>
<tr>
<td><code>std</code></td>
<td><code>Union[float, Sequence[float]]</code></td>
<td><p>std values</p></td>
</tr>
<tr>
<td><code>max_pixel_value</code></td>
<td><code>float</code></td>
<td><p>maximum possible pixel value</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Normalize</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Normalization is applied by the formula: `img = (img - mean * max_pixel_value) / (std * max_pixel_value)`</span>

<span class="sd">    Args:</span>
<span class="sd">        mean: mean values</span>
<span class="sd">        std: std values</span>
<span class="sd">        max_pixel_value: maximum possible pixel value</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mean</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.485</span><span class="p">,</span> <span class="mf">0.456</span><span class="p">,</span> <span class="mf">0.406</span><span class="p">),</span>
        <span class="n">std</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.229</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.225</span><span class="p">),</span>
        <span class="n">max_pixel_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">255.0</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">std</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_pixel_value</span> <span class="o">=</span> <span class="n">max_pixel_value</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">std</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_pixel_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"mean"</span><span class="p">,</span> <span class="s2">"std"</span><span class="p">,</span> <span class="s2">"max_pixel_value"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="PixelDropout" id="albumentations.augmentations.transforms.PixelDropout">
<code>class <strong>
PixelDropout</strong></code>
<code>


    (dropout_prob=0.01, per_channel=False, drop_value=0, mask_drop_value=None, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2538" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.PixelDropout" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Set pixels to 0 with some probability.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dropout_prob</code></td>
<td><code>float</code></td>
<td><p>pixel drop probability. Default: 0.01</p></td>
</tr>
<tr>
<td><code>per_channel</code></td>
<td><code>bool</code></td>
<td><p>if set to <code>True</code> drop mask will be sampled for each channel,
otherwise the same mask will be sampled for all channels. Default: False</p></td>
</tr>
<tr>
<td><code>drop_value</code></td>
<td><code>number or sequence of numbers or None</code></td>
<td><p>Value that will be set in dropped place.
If set to None value will be sampled randomly, default ranges will be used:
    - uint8 - [0, 255]
    - uint16 - [0, 65535]
    - uint32 - [0, 4294967295]
    - float, double - [0, 1]
Default: 0</p></td>
</tr>
<tr>
<td><code>mask_drop_value</code></td>
<td><code>number or sequence of numbers or None</code></td>
<td><p>Value that will be set in dropped place in masks.
If set to None masks will be unchanged. Default: 0</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image, mask</p>
</div>
<p>Image types:
    any</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">PixelDropout</span><span class="p">(</span><span class="n">DualTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Set pixels to 0 with some probability.</span>

<span class="sd">    Args:</span>
<span class="sd">        dropout_prob (float): pixel drop probability. Default: 0.01</span>
<span class="sd">        per_channel (bool): if set to `True` drop mask will be sampled for each channel,</span>
<span class="sd">            otherwise the same mask will be sampled for all channels. Default: False</span>
<span class="sd">        drop_value (number or sequence of numbers or None): Value that will be set in dropped place.</span>
<span class="sd">            If set to None value will be sampled randomly, default ranges will be used:</span>
<span class="sd">                - uint8 - [0, 255]</span>
<span class="sd">                - uint16 - [0, 65535]</span>
<span class="sd">                - uint32 - [0, 4294967295]</span>
<span class="sd">                - float, double - [0, 1]</span>
<span class="sd">            Default: 0</span>
<span class="sd">        mask_drop_value (number or sequence of numbers or None): Value that will be set in dropped place in masks.</span>
<span class="sd">            If set to None masks will be unchanged. Default: 0</span>
<span class="sd">        p (float): probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image, mask</span>
<span class="sd">    Image types:</span>
<span class="sd">        any</span>

<span class="sd">    """</span>

    <span class="n">_targets</span> <span class="o">=</span> <span class="p">(</span><span class="n">Targets</span><span class="o">.</span><span class="n">IMAGE</span><span class="p">,</span> <span class="n">Targets</span><span class="o">.</span><span class="n">MASK</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dropout_prob</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
        <span class="n">per_channel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">drop_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ScaleFloatType</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">mask_drop_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ScaleFloatType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropout_prob</span> <span class="o">=</span> <span class="n">dropout_prob</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span> <span class="o">=</span> <span class="n">per_channel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drop_value</span> <span class="o">=</span> <span class="n">drop_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mask_drop_value</span> <span class="o">=</span> <span class="n">mask_drop_value</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_drop_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"PixelDropout supports mask only with per_channel=False"</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">drop_mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">drop_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">pixel_dropout</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">drop_mask</span><span class="p">,</span> <span class="n">drop_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">drop_mask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_drop_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mask</span>

        <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="n">TWO</span><span class="p">:</span>
            <span class="n">drop_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">drop_mask</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">pixel_dropout</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">drop_mask</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_drop_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox</span><span class="p">:</span> <span class="n">BoxInternalType</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BoxInternalType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bbox</span>

    <span class="k">def</span> <span class="nf">apply_to_keypoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keypoint</span><span class="p">:</span> <span class="n">KeypointInternalType</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KeypointInternalType</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">keypoint</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">per_channel</span> <span class="k">else</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">rnd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">31</span><span class="p">))</span>
        <span class="c1"># Use choice to create boolean matrix, if we will use binomial after that we will need type conversion</span>
        <span class="n">drop_mask</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="n">shape</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">dropout_prob</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropout_prob</span><span class="p">])</span>

        <span class="n">drop_value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">drop_mask</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="n">img</span><span class="o">.</span><span class="n">ndim</span><span class="p">:</span>
            <span class="n">drop_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">drop_mask</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">drop_shape</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

            <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">):</span>
                <span class="n">drop_value</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">F</span><span class="o">.</span><span class="n">MAX_VALUES_BY_DTYPE</span><span class="p">[</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">]),</span> <span class="n">drop_shape</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">double</span><span class="p">]:</span>
                <span class="n">drop_value</span> <span class="o">=</span> <span class="n">rnd</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">drop_shape</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported dtype: </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">drop_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_value</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"drop_mask"</span><span class="p">:</span> <span class="n">drop_mask</span><span class="p">,</span> <span class="s2">"drop_value"</span><span class="p">:</span> <span class="n">drop_value</span><span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"dropout_prob"</span><span class="p">,</span> <span class="s2">"per_channel"</span><span class="p">,</span> <span class="s2">"drop_value"</span><span class="p">,</span> <span class="s2">"mask_drop_value"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Posterize" id="albumentations.augmentations.transforms.Posterize">
<code>class <strong>
Posterize</strong></code>
<code>


    (num_bits=4, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1095" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Posterize" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Reduce the number of bits for each color channel.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>num_bits</code></td>
<td><code>int, int) or int,
      or list of ints [r, g, b],
      or list of ints [[r1, r1], [g1, g2], [b1, b2]]</code></td>
<td><p>number of high bits.
If num_bits is a single value, the range will be [num_bits, num_bits].
Must be in range [0, 8]. Default: 4.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <p>Targets:
image</p>
<p>Image types:
    uint8</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Posterize</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Reduce the number of bits for each color channel.</span>

<span class="sd">    Args:</span>
<span class="sd">        num_bits ((int, int) or int,</span>
<span class="sd">                  or list of ints [r, g, b],</span>
<span class="sd">                  or list of ints [[r1, r1], [g1, g2], [b1, b2]]): number of high bits.</span>
<span class="sd">            If num_bits is a single value, the range will be [num_bits, num_bits].</span>
<span class="sd">            Must be in range [0, 8]. Default: 4.</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">    image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">num_bits</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_bits</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">num_bits</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num_bits</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">num_bits</span><span class="p">)</span> <span class="o">==</span> <span class="n">THREE</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">num_bits</span><span class="p">]</span>  <span class="c1"># type: ignore[assignment]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">num_bits</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">posterize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">num_bits</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span><span class="p">)</span> <span class="o">==</span> <span class="n">THREE</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">"num_bits"</span><span class="p">:</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span><span class="p">]}</span>  <span class="c1"># type: ignore[index]</span>
        <span class="n">num_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_bits</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"num_bits"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">num_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]))}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"num_bits"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RGBShift" id="albumentations.augmentations.transforms.RGBShift">
<code>class <strong>
RGBShift</strong></code>
<code>


    (r_shift_limit=20, g_shift_limit=20, b_shift_limit=20, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1198" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RGBShift" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly shift values for each channel of the input RGB image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing values for the red channel. If r_shift_limit is a single
int, the range will be (-r_shift_limit, r_shift_limit). Default: (-20, 20).</p></td>
</tr>
<tr>
<td><code>g_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing values for the green channel. If g_shift_limit is a
single int, the range  will be (-g_shift_limit, g_shift_limit). Default: (-20, 20).</p></td>
</tr>
<tr>
<td><code>b_shift_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>range for changing values for the blue channel. If b_shift_limit is a single
int, the range will be (-b_shift_limit, b_shift_limit). Default: (-20, 20).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RGBShift</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly shift values for each channel of the input RGB image.</span>

<span class="sd">    Args:</span>
<span class="sd">        r_shift_limit: range for changing values for the red channel. If r_shift_limit is a single</span>
<span class="sd">            int, the range will be (-r_shift_limit, r_shift_limit). Default: (-20, 20).</span>
<span class="sd">        g_shift_limit: range for changing values for the green channel. If g_shift_limit is a</span>
<span class="sd">            single int, the range  will be (-g_shift_limit, g_shift_limit). Default: (-20, 20).</span>
<span class="sd">        b_shift_limit: range for changing values for the blue channel. If b_shift_limit is a single</span>
<span class="sd">            int, the range will be (-b_shift_limit, b_shift_limit). Default: (-20, 20).</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">r_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">g_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">b_shift_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">r_shift_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">g_shift_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b_shift_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">b_shift_limit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">r_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">g_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">b_shift</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"RGBShift transformation expects 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">shift_rgb</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">r_shift</span><span class="p">,</span> <span class="n">g_shift</span><span class="p">,</span> <span class="n">b_shift</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"r_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">r_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"g_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">g_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"b_shift"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b_shift_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">b_shift_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"r_shift_limit"</span><span class="p">,</span> <span class="s2">"g_shift_limit"</span><span class="p">,</span> <span class="s2">"b_shift_limit"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomBrightnessContrast" id="albumentations.augmentations.transforms.RandomBrightnessContrast">
<code>class <strong>
RandomBrightnessContrast</strong></code>
<code>


    (brightness_limit=0.2, contrast_limit=0.2, brightness_by_max=True, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1248" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomBrightnessContrast" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly change brightness and contrast of the input image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>brightness_limit</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>factor range for changing brightness.
If limit is a single float, the range will be (-limit, limit). Default: (-0.2, 0.2).</p></td>
</tr>
<tr>
<td><code>contrast_limit</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>factor range for changing contrast.
If limit is a single float, the range will be (-limit, limit). Default: (-0.2, 0.2).</p></td>
</tr>
<tr>
<td><code>brightness_by_max</code></td>
<td><code>bool</code></td>
<td><p>If True adjust contrast by image dtype maximum,
else adjust contrast by image mean.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomBrightnessContrast</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly change brightness and contrast of the input image.</span>

<span class="sd">    Args:</span>
<span class="sd">        brightness_limit: factor range for changing brightness.</span>
<span class="sd">            If limit is a single float, the range will be (-limit, limit). Default: (-0.2, 0.2).</span>
<span class="sd">        contrast_limit: factor range for changing contrast.</span>
<span class="sd">            If limit is a single float, the range will be (-limit, limit). Default: (-0.2, 0.2).</span>
<span class="sd">        brightness_by_max: If True adjust contrast by image dtype maximum,</span>
<span class="sd">            else adjust contrast by image mean.</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">brightness_limit</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">contrast_limit</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
        <span class="n">brightness_by_max</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brightness_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">brightness_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contrast_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">contrast_limit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brightness_by_max</span> <span class="o">=</span> <span class="n">brightness_by_max</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">beta</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">brightness_contrast_adjust</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness_by_max</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"alpha"</span><span class="p">:</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">contrast_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">contrast_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"beta"</span><span class="p">:</span> <span class="mf">0.0</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">brightness_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"brightness_limit"</span><span class="p">,</span> <span class="s2">"contrast_limit"</span><span class="p">,</span> <span class="s2">"brightness_by_max"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomFog" id="albumentations.augmentations.transforms.RandomFog">
<code>class <strong>
RandomFog</strong></code>
<code>


    (fog_coef_lower=0.3, fog_coef_upper=1, alpha_coef=0.08, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L625" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomFog" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Simulates fog for the image</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fog_coef_lower</code></td>
<td><code>float</code></td>
<td><p>lower limit for fog intensity coefficient. Should be in [0, 1] range.</p></td>
</tr>
<tr>
<td><code>fog_coef_upper</code></td>
<td><code>float</code></td>
<td><p>upper limit for fog intensity coefficient. Should be in [0, 1] range.</p></td>
</tr>
<tr>
<td><code>alpha_coef</code></td>
<td><code>float</code></td>
<td><p>transparency of the fog circles. Should be in [0, 1] range.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomFog</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Simulates fog for the image</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        fog_coef_lower: lower limit for fog intensity coefficient. Should be in [0, 1] range.</span>
<span class="sd">        fog_coef_upper: upper limit for fog intensity coefficient. Should be in [0, 1] range.</span>
<span class="sd">        alpha_coef: transparency of the fog circles. Should be in [0, 1] range.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fog_coef_lower</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="n">fog_coef_upper</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">alpha_coef</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.08</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">fog_coef_lower</span> <span class="o">&lt;=</span> <span class="n">fog_coef_upper</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">"Invalid combination if fog_coef_lower and fog_coef_upper. Got: </span><span class="si">{</span><span class="p">(</span><span class="n">fog_coef_lower</span><span class="p">,</span><span class="w"> </span><span class="n">fog_coef_upper</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">alpha_coef</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"alpha_coef must be in range [0, 1]. Got: </span><span class="si">{</span><span class="n">alpha_coef</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fog_coef_lower</span> <span class="o">=</span> <span class="n">fog_coef_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fog_coef_upper</span> <span class="o">=</span> <span class="n">fog_coef_upper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_coef</span> <span class="o">=</span> <span class="n">alpha_coef</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">fog_coef</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">haze_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">haze_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">haze_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_fog</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">fog_coef</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha_coef</span><span class="p">,</span> <span class="n">haze_list</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">fog_coef</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fog_coef_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fog_coef_upper</span><span class="p">)</span>

        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">imshape</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">hw</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">//</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">fog_coef</span><span class="p">))</span>

        <span class="n">haze_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">midx</span> <span class="o">=</span> <span class="n">width</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">hw</span>
        <span class="n">midy</span> <span class="o">=</span> <span class="n">height</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">hw</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">while</span> <span class="n">midx</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">hw</span> <span class="ow">or</span> <span class="n">midy</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">hw</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">hw</span> <span class="o">//</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">index</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">midx</span><span class="p">,</span> <span class="n">width</span> <span class="o">-</span> <span class="n">midx</span> <span class="o">-</span> <span class="n">hw</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">midy</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">midy</span> <span class="o">-</span> <span class="n">hw</span><span class="p">)</span>
                <span class="n">haze_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

            <span class="n">midx</span> <span class="o">-=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">hw</span> <span class="o">*</span> <span class="n">width</span> <span class="o">//</span> <span class="nb">sum</span><span class="p">(</span><span class="n">imshape</span><span class="p">)</span>
            <span class="n">midy</span> <span class="o">-=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">hw</span> <span class="o">*</span> <span class="n">height</span> <span class="o">//</span> <span class="nb">sum</span><span class="p">(</span><span class="n">imshape</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"haze_list"</span><span class="p">:</span> <span class="n">haze_list</span><span class="p">,</span> <span class="s2">"fog_coef"</span><span class="p">:</span> <span class="n">fog_coef</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"fog_coef_lower"</span><span class="p">,</span> <span class="s2">"fog_coef_upper"</span><span class="p">,</span> <span class="s2">"alpha_coef"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomGamma" id="albumentations.augmentations.transforms.RandomGamma">
<code>class <strong>
RandomGamma</strong></code>
<code>


    (gamma_limit=(80, 120), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1516" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomGamma" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Applies random gamma correction to an image as a form of data augmentation.</p>
<p>This class adjusts the luminance of an image by applying gamma correction with a randomly
selected gamma value from a specified range. Gamma correction can simulate various lighting
conditions, potentially enhancing model generalization. For more details on gamma correction,
see: <a href="https://en.wikipedia.org/wiki/Gamma_correction" target="_blank">https://en.wikipedia.org/wiki/Gamma_correction</a></p>
<p><strong>Attributes:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gamma_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>The range for gamma adjustment. If <code>gamma_limit</code> is a single
int, the range will be interpreted as (-gamma_limit, gamma_limit), defining how much
to adjust the image's gamma. Default is (80, 120).</p></td>
</tr>
<tr>
<td><code>always_apply</code></td>
<td><code>bool</code></td>
<td><p>If <code>True</code>, the transform will always be applied, regardless of <code>p</code>.
Default is <code>False</code>.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>The probability that the transform will be applied. Default is 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomGamma</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Applies random gamma correction to an image as a form of data augmentation.</span>

<span class="sd">    This class adjusts the luminance of an image by applying gamma correction with a randomly</span>
<span class="sd">    selected gamma value from a specified range. Gamma correction can simulate various lighting</span>
<span class="sd">    conditions, potentially enhancing model generalization. For more details on gamma correction,</span>
<span class="sd">    see: https://en.wikipedia.org/wiki/Gamma_correction</span>

<span class="sd">    Attributes:</span>
<span class="sd">        gamma_limit (Union[int, Tuple[int, int]]): The range for gamma adjustment. If `gamma_limit` is a single</span>
<span class="sd">            int, the range will be interpreted as (-gamma_limit, gamma_limit), defining how much</span>
<span class="sd">            to adjust the image's gamma. Default is (80, 120).</span>
<span class="sd">        always_apply (bool): If `True`, the transform will always be applied, regardless of `p`.</span>
<span class="sd">            Default is `False`.</span>
<span class="sd">        p (float): The probability that the transform will be applied. Default is 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gamma_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma_limit</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">gamma_limit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">gamma</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">gamma_transform</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="n">gamma</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"gamma"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">100.0</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"gamma_limit"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomGravel" id="albumentations.augmentations.transforms.RandomGravel">
<code>class <strong>
RandomGravel</strong></code>
<code>


    (gravel_roi=(0.1, 0.4, 0.9, 0.9), number_of_patches=2, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L383" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomGravel" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Add gravels.</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gravel_roi</code></td>
<td><code>Tuple[float, float, float, float]</code></td>
<td><p>(top-left x, top-left y,
bottom-right x, bottom right y). Should be in [0, 1] range</p></td>
</tr>
<tr>
<td><code>number_of_patches</code></td>
<td><code>int</code></td>
<td><p>no. of gravel patches required</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomGravel</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Add gravels.</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        gravel_roi: (top-left x, top-left y,</span>
<span class="sd">            bottom-right x, bottom right y). Should be in [0, 1] range</span>
<span class="sd">        number_of_patches: no. of gravel patches required</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gravel_roi</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span>
        <span class="n">number_of_patches</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="p">(</span><span class="n">gravel_lower_x</span><span class="p">,</span> <span class="n">gravel_lower_y</span><span class="p">,</span> <span class="n">gravel_upper_x</span><span class="p">,</span> <span class="n">gravel_upper_y</span><span class="p">)</span> <span class="o">=</span> <span class="n">gravel_roi</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">gravel_lower_x</span> <span class="o">&lt;</span> <span class="n">gravel_upper_x</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">gravel_lower_y</span> <span class="o">&lt;</span> <span class="n">gravel_upper_y</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid gravel_roi. Got: </span><span class="si">{</span><span class="n">gravel_roi</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">number_of_patches</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid gravel number_of_patches. Got: </span><span class="si">{</span><span class="n">number_of_patches</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">gravel_roi</span> <span class="o">=</span> <span class="n">gravel_roi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_patches</span> <span class="o">=</span> <span class="n">number_of_patches</span>

    <span class="k">def</span> <span class="nf">generate_gravel_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rectangular_roi</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">rectangular_roi</span>
        <span class="n">area</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">))</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">area</span> <span class="o">//</span> <span class="mi">10</span>
        <span class="n">gravels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">([</span><span class="n">count</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
        <span class="n">gravels</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="n">gravels</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gravels</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">gravels_infos</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gravels_infos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">gravels_infos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_gravel</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">gravels_infos</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gravel_roi</span>
        <span class="n">x_min</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_min</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_max</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_min</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_max</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>

        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">30</span>

        <span class="n">rectangular_rois</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">number_of_patches</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
        <span class="n">xx1</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">x_min</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_patches</span><span class="p">)</span>  <span class="c1"># xmax</span>
        <span class="n">xx2</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">xx1</span><span class="p">)</span>  <span class="c1"># xmin</span>
        <span class="n">yy1</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">y_min</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y_max</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_of_patches</span><span class="p">)</span>  <span class="c1"># ymax</span>
        <span class="n">yy2</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">y_min</span><span class="p">,</span> <span class="n">yy1</span><span class="p">)</span>  <span class="c1"># ymin</span>

        <span class="n">rectangular_rois</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">xx2</span>
        <span class="n">rectangular_rois</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">yy2</span>
        <span class="n">rectangular_rois</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xx1</span><span class="p">,</span> <span class="n">xx2</span> <span class="o">+</span> <span class="n">max_height</span><span class="p">)]</span>
        <span class="n">rectangular_rois</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">tup</span><span class="p">)</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">yy1</span><span class="p">,</span> <span class="n">yy2</span> <span class="o">+</span> <span class="n">max_width</span><span class="p">)]</span>

        <span class="n">minx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">maxx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">miny</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">maxy</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">val</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">roi</span> <span class="ow">in</span> <span class="n">rectangular_rois</span><span class="p">:</span>
            <span class="n">gravels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_gravel_patch</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">gravels</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">gravels</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gravels</span><span class="p">))</span>
            <span class="n">sat</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gravels</span><span class="p">))</span>
            <span class="n">miny</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">maxy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">r</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">minx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">maxx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">r</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
            <span class="n">val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"gravels_infos"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">miny</span><span class="p">),</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">maxy</span><span class="p">),</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">minx</span><span class="p">),</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">maxx</span><span class="p">),</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">val</span><span class="p">),</span>
                <span class="p">],</span>
                <span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">"gravel_roi"</span><span class="p">,</span> <span class="s2">"number_of_patches"</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomGridShuffle" id="albumentations.augmentations.transforms.RandomGridShuffle">
<code>class <strong>
RandomGridShuffle</strong></code>
<code>


    (grid=(3, 3), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L103" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomGridShuffle" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Random shuffle grid's cells on image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>grid</code></td>
<td><code>int, int</code></td>
<td><p>size of grid for splitting image.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image, mask, keypoints</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomGridShuffle</span><span class="p">(</span><span class="n">DualTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Random shuffle grid's cells on image.</span>

<span class="sd">    Args:</span>
<span class="sd">        grid ((int, int)): size of grid for splitting image.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image, mask, keypoints</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="n">_targets</span> <span class="o">=</span> <span class="p">(</span><span class="n">Targets</span><span class="o">.</span><span class="n">IMAGE</span><span class="p">,</span> <span class="n">Targets</span><span class="o">.</span><span class="n">MASK</span><span class="p">,</span> <span class="n">Targets</span><span class="o">.</span><span class="n">KEYPOINTS</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">tiles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">swap_tiles_on_image</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">tiles</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_mask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">tiles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">swap_tiles_on_image</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">tiles</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_to_keypoint</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">keypoint</span><span class="p">:</span> <span class="n">KeypointInternalType</span><span class="p">,</span>
        <span class="n">tiles</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">rows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">cols</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">KeypointInternalType</span><span class="p">:</span>
        <span class="k">for</span> <span class="p">(</span>
            <span class="n">current_left_up_corner_row</span><span class="p">,</span>
            <span class="n">current_left_up_corner_col</span><span class="p">,</span>
            <span class="n">old_left_up_corner_row</span><span class="p">,</span>
            <span class="n">old_left_up_corner_col</span><span class="p">,</span>
            <span class="n">height_tile</span><span class="p">,</span>
            <span class="n">width_tile</span><span class="p">,</span>
        <span class="p">)</span> <span class="ow">in</span> <span class="n">tiles</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">keypoint</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">old_left_up_corner_row</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">old_left_up_corner_row</span> <span class="o">+</span> <span class="n">height_tile</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">old_left_up_corner_col</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">old_left_up_corner_col</span> <span class="o">+</span> <span class="n">width_tile</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">old_left_up_corner_col</span> <span class="o">+</span> <span class="n">current_left_up_corner_col</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">old_left_up_corner_row</span> <span class="o">+</span> <span class="n">current_left_up_corner_row</span>
                <span class="n">keypoint_result</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="n">keypoint</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">KeypointInternalType</span><span class="p">,</span> <span class="n">keypoint_result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">m</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Grid's values must be positive. Current grid [</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">height</span> <span class="o">//</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">width</span> <span class="o">//</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Incorrect size cell of grid. Just shuffle pixels of image"</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">height_split</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
        <span class="n">width_split</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

        <span class="n">height_matrix</span><span class="p">,</span> <span class="n">width_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">height_split</span><span class="p">,</span> <span class="n">width_split</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s2">"ij"</span><span class="p">)</span>

        <span class="n">index_height_matrix</span> <span class="o">=</span> <span class="n">height_matrix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">index_width_matrix</span> <span class="o">=</span> <span class="n">width_matrix</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">shifted_index_height_matrix</span> <span class="o">=</span> <span class="n">height_matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">1</span><span class="p">:]</span>
        <span class="n">shifted_index_width_matrix</span> <span class="o">=</span> <span class="n">width_matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">1</span><span class="p">:]</span>

        <span class="n">height_tile_sizes</span> <span class="o">=</span> <span class="n">shifted_index_height_matrix</span> <span class="o">-</span> <span class="n">index_height_matrix</span>
        <span class="n">width_tile_sizes</span> <span class="o">=</span> <span class="n">shifted_index_width_matrix</span> <span class="o">-</span> <span class="n">index_width_matrix</span>

        <span class="n">tiles_sizes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">height_tile_sizes</span><span class="p">,</span> <span class="n">width_tile_sizes</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">index_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">indices</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
        <span class="n">new_index_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">(</span><span class="n">index_matrix</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">bbox_size</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">tiles_sizes</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
            <span class="n">eq_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">tiles_sizes</span> <span class="o">==</span> <span class="n">bbox_size</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">new_index_matrix</span><span class="p">[</span><span class="n">eq_mat</span><span class="p">]</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">permutation</span><span class="p">(</span><span class="n">new_index_matrix</span><span class="p">[</span><span class="n">eq_mat</span><span class="p">])</span>

        <span class="n">new_index_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">new_index_matrix</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">old_x</span> <span class="o">=</span> <span class="n">index_height_matrix</span><span class="p">[</span><span class="n">new_index_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">new_index_matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">old_y</span> <span class="o">=</span> <span class="n">index_width_matrix</span><span class="p">[</span><span class="n">new_index_matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">new_index_matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">shift_x</span> <span class="o">=</span> <span class="n">height_tile_sizes</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">shift_y</span> <span class="o">=</span> <span class="n">width_tile_sizes</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">curr_x</span> <span class="o">=</span> <span class="n">index_height_matrix</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">curr_y</span> <span class="o">=</span> <span class="n">index_width_matrix</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">tiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">curr_x</span><span class="p">,</span> <span class="n">curr_y</span><span class="p">,</span> <span class="n">old_x</span><span class="p">,</span> <span class="n">old_y</span><span class="p">,</span> <span class="n">shift_x</span><span class="p">,</span> <span class="n">shift_y</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"tiles"</span><span class="p">:</span> <span class="n">tiles</span><span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"grid"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomRain" id="albumentations.augmentations.transforms.RandomRain">
<code>class <strong>
RandomRain</strong></code>
<code>


    (slant_lower=-10, slant_upper=10, drop_length=20, drop_width=1, drop_color=(200, 200, 200), blur_value=7, brightness_coefficient=0.7, rain_type=None, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L501" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomRain" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Adds rain effects.</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>slant_lower</code></td>
<td><code>int</code></td>
<td><p>should be in range [-20, 20].</p></td>
</tr>
<tr>
<td><code>slant_upper</code></td>
<td><code>int</code></td>
<td><p>should be in range [-20, 20].</p></td>
</tr>
<tr>
<td><code>drop_length</code></td>
<td><code>int</code></td>
<td><p>should be in range [0, 100].</p></td>
</tr>
<tr>
<td><code>drop_width</code></td>
<td><code>int</code></td>
<td><p>should be in range [1, 5].</p></td>
</tr>
<tr>
<td><code>drop_color</code></td>
<td><code>list of (r, g, b</code></td>
<td><p>rain lines color.</p></td>
</tr>
<tr>
<td><code>blur_value</code></td>
<td><code>int</code></td>
<td><p>rainy view are blurry</p></td>
</tr>
<tr>
<td><code>brightness_coefficient</code></td>
<td><code>float</code></td>
<td><p>rainy days are usually shady. Should be in range [0, 1].</p></td>
</tr>
<tr>
<td><code>rain_type</code></td>
<td><code>Optional[str]</code></td>
<td><p>One of [None, "drizzle", "heavy", "torrential"]</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomRain</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Adds rain effects.</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        slant_lower: should be in range [-20, 20].</span>
<span class="sd">        slant_upper: should be in range [-20, 20].</span>
<span class="sd">        drop_length: should be in range [0, 100].</span>
<span class="sd">        drop_width: should be in range [1, 5].</span>
<span class="sd">        drop_color (list of (r, g, b)): rain lines color.</span>
<span class="sd">        blur_value (int): rainy view are blurry</span>
<span class="sd">        brightness_coefficient (float): rainy days are usually shady. Should be in range [0, 1].</span>
<span class="sd">        rain_type: One of [None, "drizzle", "heavy", "torrential"]</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">slant_lower</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">slant_upper</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">drop_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">drop_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">drop_color</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
        <span class="n">blur_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
        <span class="n">brightness_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>
        <span class="n">rain_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">rain_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"drizzle"</span><span class="p">,</span> <span class="s2">"heavy"</span><span class="p">,</span> <span class="s2">"torrential"</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"raint_type must be one of (</span><span class="si">{}</span><span class="s2">). Got: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">([</span><span class="s2">"drizzle"</span><span class="p">,</span> <span class="s2">"heavy"</span><span class="p">,</span> <span class="s2">"torrential"</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">rain_type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="o">-</span><span class="n">TWENTY</span> <span class="o">&lt;=</span> <span class="n">slant_lower</span> <span class="o">&lt;=</span> <span class="n">slant_upper</span> <span class="o">&lt;=</span> <span class="n">TWENTY</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid combination of slant_lower and slant_upper. Got: </span><span class="si">{</span><span class="p">(</span><span class="n">slant_lower</span><span class="p">,</span><span class="w"> </span><span class="n">slant_upper</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">drop_width</span> <span class="o">&lt;=</span> <span class="n">FIVE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"drop_width must be in range [1, 5]. Got: </span><span class="si">{</span><span class="n">drop_width</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">drop_length</span> <span class="o">&lt;=</span> <span class="n">HUNDRED</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"drop_length must be in range [0, 100]. Got: </span><span class="si">{</span><span class="n">drop_length</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">brightness_coefficient</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"brightness_coefficient must be in range [0, 1]. Got: </span><span class="si">{</span><span class="n">brightness_coefficient</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slant_lower</span> <span class="o">=</span> <span class="n">slant_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slant_upper</span> <span class="o">=</span> <span class="n">slant_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">drop_length</span> <span class="o">=</span> <span class="n">drop_length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drop_width</span> <span class="o">=</span> <span class="n">drop_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drop_color</span> <span class="o">=</span> <span class="n">drop_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blur_value</span> <span class="o">=</span> <span class="n">blur_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brightness_coefficient</span> <span class="o">=</span> <span class="n">brightness_coefficient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rain_type</span> <span class="o">=</span> <span class="n">rain_type</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">slant</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">drop_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">rain_drops</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rain_drops</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rain_drops</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_rain</span><span class="p">(</span>
            <span class="n">img</span><span class="p">,</span>
            <span class="n">slant</span><span class="p">,</span>
            <span class="n">drop_length</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drop_width</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drop_color</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blur_value</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">brightness_coefficient</span><span class="p">,</span>
            <span class="n">rain_drops</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">slant</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slant_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">slant_upper</span><span class="p">))</span>

        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">height</span> <span class="o">*</span> <span class="n">width</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rain_type</span> <span class="o">==</span> <span class="s2">"drizzle"</span><span class="p">:</span>
            <span class="n">num_drops</span> <span class="o">=</span> <span class="n">area</span> <span class="o">//</span> <span class="mi">770</span>
            <span class="n">drop_length</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rain_type</span> <span class="o">==</span> <span class="s2">"heavy"</span><span class="p">:</span>
            <span class="n">num_drops</span> <span class="o">=</span> <span class="n">width</span> <span class="o">*</span> <span class="n">height</span> <span class="o">//</span> <span class="mi">600</span>
            <span class="n">drop_length</span> <span class="o">=</span> <span class="mi">30</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rain_type</span> <span class="o">==</span> <span class="s2">"torrential"</span><span class="p">:</span>
            <span class="n">num_drops</span> <span class="o">=</span> <span class="n">area</span> <span class="o">//</span> <span class="mi">500</span>
            <span class="n">drop_length</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">drop_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drop_length</span>
            <span class="n">num_drops</span> <span class="o">=</span> <span class="n">area</span> <span class="o">//</span> <span class="mi">600</span>

        <span class="n">rain_drops</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_drops</span><span class="p">):</span>  <span class="c1"># If You want heavy rain, try increasing this</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">slant</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span> <span class="k">if</span> <span class="n">slant</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span> <span class="o">-</span> <span class="n">slant</span><span class="p">)</span>

            <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">height</span> <span class="o">-</span> <span class="n">drop_length</span><span class="p">)</span>

            <span class="n">rain_drops</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"drop_length"</span><span class="p">:</span> <span class="n">drop_length</span><span class="p">,</span> <span class="s2">"slant"</span><span class="p">:</span> <span class="n">slant</span><span class="p">,</span> <span class="s2">"rain_drops"</span><span class="p">:</span> <span class="n">rain_drops</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">"slant_lower"</span><span class="p">,</span>
            <span class="s2">"slant_upper"</span><span class="p">,</span>
            <span class="s2">"drop_length"</span><span class="p">,</span>
            <span class="s2">"drop_width"</span><span class="p">,</span>
            <span class="s2">"drop_color"</span><span class="p">,</span>
            <span class="s2">"blur_value"</span><span class="p">,</span>
            <span class="s2">"brightness_coefficient"</span><span class="p">,</span>
            <span class="s2">"rain_type"</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomShadow" id="albumentations.augmentations.transforms.RandomShadow">
<code>class <strong>
RandomShadow</strong></code>
<code>


    (shadow_roi=(0, 0.5, 1, 1), num_shadows_lower=1, num_shadows_upper=2, shadow_dimension=5, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L876" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomShadow" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Simulates shadows for the image</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>shadow_roi</code></td>
<td><code>Tuple[float, float, float, float]</code></td>
<td><p>region of the image where shadows
will appear. All values should be in range [0, 1].</p></td>
</tr>
<tr>
<td><code>num_shadows_lower</code></td>
<td><code>int</code></td>
<td><p>Lower limit for the possible number of shadows.
Should be in range [0, <code>num_shadows_upper</code>].</p></td>
</tr>
<tr>
<td><code>num_shadows_upper</code></td>
<td><code>int</code></td>
<td><p>Lower limit for the possible number of shadows.
Should be in range [<code>num_shadows_lower</code>, inf].</p></td>
</tr>
<tr>
<td><code>shadow_dimension</code></td>
<td><code>int</code></td>
<td><p>number of edges in the shadow polygons</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomShadow</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Simulates shadows for the image</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        shadow_roi: region of the image where shadows</span>
<span class="sd">            will appear. All values should be in range [0, 1].</span>
<span class="sd">        num_shadows_lower: Lower limit for the possible number of shadows.</span>
<span class="sd">            Should be in range [0, `num_shadows_upper`].</span>
<span class="sd">        num_shadows_upper: Lower limit for the possible number of shadows.</span>
<span class="sd">            Should be in range [`num_shadows_lower`, inf].</span>
<span class="sd">        shadow_dimension: number of edges in the shadow polygons</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">shadow_roi</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">num_shadows_lower</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">num_shadows_upper</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">shadow_dimension</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="p">(</span><span class="n">shadow_lower_x</span><span class="p">,</span> <span class="n">shadow_lower_y</span><span class="p">,</span> <span class="n">shadow_upper_x</span><span class="p">,</span> <span class="n">shadow_upper_y</span><span class="p">)</span> <span class="o">=</span> <span class="n">shadow_roi</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">shadow_lower_x</span> <span class="o">&lt;=</span> <span class="n">shadow_upper_x</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">shadow_lower_y</span> <span class="o">&lt;=</span> <span class="n">shadow_upper_y</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid shadow_roi. Got: </span><span class="si">{</span><span class="n">shadow_roi</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">num_shadows_lower</span> <span class="o">&lt;=</span> <span class="n">num_shadows_upper</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Invalid combination of num_shadows_lower nad num_shadows_upper. Got: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="p">(</span><span class="n">num_shadows_lower</span><span class="p">,</span> <span class="n">num_shadows_upper</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shadow_roi</span> <span class="o">=</span> <span class="n">shadow_roi</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">num_shadows_lower</span> <span class="o">=</span> <span class="n">num_shadows_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_shadows_upper</span> <span class="o">=</span> <span class="n">num_shadows_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shadow_dimension</span> <span class="o">=</span> <span class="n">shadow_dimension</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vertices_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">vertices_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vertices_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_shadow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">vertices_list</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">num_shadows</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_shadows_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_shadows_upper</span><span class="p">)</span>

        <span class="n">x_min</span><span class="p">,</span> <span class="n">y_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">,</span> <span class="n">y_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shadow_roi</span>

        <span class="n">x_min</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_min</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">x_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x_max</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_min</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y_max</span> <span class="o">*</span> <span class="n">height</span><span class="p">)</span>

        <span class="n">vertices_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_shadows</span><span class="p">):</span>
            <span class="n">vertex</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x_max</span><span class="p">),</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">y_min</span><span class="p">,</span> <span class="n">y_max</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shadow_dimension</span><span class="p">)</span>
            <span class="p">]</span>

            <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">vertex</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
            <span class="n">vertices_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"vertices_list"</span><span class="p">:</span> <span class="n">vertices_list</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="s2">"shadow_roi"</span><span class="p">,</span>
            <span class="s2">"num_shadows_lower"</span><span class="p">,</span>
            <span class="s2">"num_shadows_upper"</span><span class="p">,</span>
            <span class="s2">"shadow_dimension"</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomSnow" id="albumentations.augmentations.transforms.RandomSnow">
<code>class <strong>
RandomSnow</strong></code>
<code>


    (snow_point_lower=0.1, snow_point_upper=0.3, brightness_coeff=2.5, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L333" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomSnow" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Bleach out some pixel values simulating snow.</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>snow_point_lower</code></td>
<td><code>float</code></td>
<td><p>lower_bond of the amount of snow. Should be in [0, 1] range</p></td>
</tr>
<tr>
<td><code>snow_point_upper</code></td>
<td><code>float</code></td>
<td><p>upper_bond of the amount of snow. Should be in [0, 1] range</p></td>
</tr>
<tr>
<td><code>brightness_coeff</code></td>
<td><code>float</code></td>
<td><p>larger number will lead to a more snow on the image. Should be &gt;= 0</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomSnow</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Bleach out some pixel values simulating snow.</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        snow_point_lower: lower_bond of the amount of snow. Should be in [0, 1] range</span>
<span class="sd">        snow_point_upper: upper_bond of the amount of snow. Should be in [0, 1] range</span>
<span class="sd">        brightness_coeff: larger number will lead to a more snow on the image. Should be &gt;= 0</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">snow_point_lower</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">snow_point_upper</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="n">brightness_coeff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">snow_point_lower</span> <span class="o">&lt;=</span> <span class="n">snow_point_upper</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Invalid combination of snow_point_lower and snow_point_upper. Got: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="p">(</span><span class="n">snow_point_lower</span><span class="p">,</span> <span class="n">snow_point_upper</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">brightness_coeff</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"brightness_coeff must be greater than 0. Got: </span><span class="si">{</span><span class="n">brightness_coeff</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">snow_point_lower</span> <span class="o">=</span> <span class="n">snow_point_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snow_point_upper</span> <span class="o">=</span> <span class="n">snow_point_upper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brightness_coeff</span> <span class="o">=</span> <span class="n">brightness_coeff</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">snow_point</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_snow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">snow_point</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">brightness_coeff</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"snow_point"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snow_point_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">snow_point_upper</span><span class="p">)}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"snow_point_lower"</span><span class="p">,</span> <span class="s2">"snow_point_upper"</span><span class="p">,</span> <span class="s2">"brightness_coeff"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomSunFlare" id="albumentations.augmentations.transforms.RandomSunFlare">
<code>class <strong>
RandomSunFlare</strong></code>
<code>


    (flare_roi=(0, 0, 1, 0.5), angle_lower=0, angle_upper=1, num_flare_circles_lower=6, num_flare_circles_upper=10, src_radius=400, src_color=(255, 255, 255), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L715" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomSunFlare" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Simulates Sun Flare for the image</p>
<p>From <a href="https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library" target="_blank">https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</a></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>flare_roi</code></td>
<td><code>Tuple[float, float, float, float]</code></td>
<td><p>region of the image where flare will appear (x_min, y_min, x_max, y_max).
All values should be in range [0, 1].</p></td>
</tr>
<tr>
<td><code>angle_lower</code></td>
<td><code>float</code></td>
<td><p>should be in range [0, <code>angle_upper</code>].</p></td>
</tr>
<tr>
<td><code>angle_upper</code></td>
<td><code>float</code></td>
<td><p>should be in range [<code>angle_lower</code>, 1].</p></td>
</tr>
<tr>
<td><code>num_flare_circles_lower</code></td>
<td><code>int</code></td>
<td><p>lower limit for the number of flare circles.
Should be in range [0, <code>num_flare_circles_upper</code>].</p></td>
</tr>
<tr>
<td><code>num_flare_circles_upper</code></td>
<td><code>int</code></td>
<td><p>upper limit for the number of flare circles.
Should be in range [<code>num_flare_circles_lower</code>, inf].</p></td>
</tr>
<tr>
<td><code>src_radius</code></td>
<td><code>int</code></td>
<td></td>
</tr>
<tr>
<td><code>src_color</code></td>
<td><code>Tuple[int, int, int]</code></td>
<td><p>color of the flare</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomSunFlare</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Simulates Sun Flare for the image</span>

<span class="sd">    From https://github.com/UjjwalSaxena/Automold--Road-Augmentation-Library</span>

<span class="sd">    Args:</span>
<span class="sd">        flare_roi: region of the image where flare will appear (x_min, y_min, x_max, y_max).</span>
<span class="sd">            All values should be in range [0, 1].</span>
<span class="sd">        angle_lower: should be in range [0, `angle_upper`].</span>
<span class="sd">        angle_upper: should be in range [`angle_lower`, 1].</span>
<span class="sd">        num_flare_circles_lower: lower limit for the number of flare circles.</span>
<span class="sd">            Should be in range [0, `num_flare_circles_upper`].</span>
<span class="sd">        num_flare_circles_upper: upper limit for the number of flare circles.</span>
<span class="sd">            Should be in range [`num_flare_circles_lower`, inf].</span>
<span class="sd">        src_radius:</span>
<span class="sd">        src_color: color of the flare</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flare_roi</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="n">angle_lower</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">angle_upper</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">num_flare_circles_lower</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
        <span class="n">num_flare_circles_upper</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">src_radius</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">400</span><span class="p">,</span>
        <span class="n">src_color</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="p">(</span>
            <span class="n">flare_center_lower_x</span><span class="p">,</span>
            <span class="n">flare_center_lower_y</span><span class="p">,</span>
            <span class="n">flare_center_upper_x</span><span class="p">,</span>
            <span class="n">flare_center_upper_y</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">flare_roi</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">flare_center_lower_x</span> <span class="o">&lt;</span> <span class="n">flare_center_upper_x</span> <span class="o">&lt;=</span> <span class="mi">1</span>
            <span class="ow">or</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">flare_center_lower_y</span> <span class="o">&lt;</span> <span class="n">flare_center_upper_y</span> <span class="o">&lt;=</span> <span class="mi">1</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid flare_roi. Got: </span><span class="si">{</span><span class="n">flare_roi</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">angle_lower</span> <span class="o">&lt;</span> <span class="n">angle_upper</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Invalid combination of angle_lower nad angle_upper. Got: </span><span class="si">{</span><span class="p">(</span><span class="n">angle_lower</span><span class="p">,</span><span class="w"> </span><span class="n">angle_upper</span><span class="p">)</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">num_flare_circles_lower</span> <span class="o">&lt;</span> <span class="n">num_flare_circles_upper</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Invalid combination of num_flare_circles_lower nad num_flare_circles_upper. Got: </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="p">(</span><span class="n">num_flare_circles_lower</span><span class="p">,</span> <span class="n">num_flare_circles_upper</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_x</span> <span class="o">=</span> <span class="n">flare_center_lower_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_x</span> <span class="o">=</span> <span class="n">flare_center_upper_x</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_y</span> <span class="o">=</span> <span class="n">flare_center_lower_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_y</span> <span class="o">=</span> <span class="n">flare_center_upper_y</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">angle_lower</span> <span class="o">=</span> <span class="n">angle_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angle_upper</span> <span class="o">=</span> <span class="n">angle_upper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_lower</span> <span class="o">=</span> <span class="n">num_flare_circles_lower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_upper</span> <span class="o">=</span> <span class="n">num_flare_circles_upper</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">src_radius</span> <span class="o">=</span> <span class="n">src_radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span> <span class="o">=</span> <span class="n">src_color</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">flare_center_x</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">flare_center_y</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">circles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">circles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">circles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_sun_flare</span><span class="p">(</span>
            <span class="n">img</span><span class="p">,</span>
            <span class="n">flare_center_x</span><span class="p">,</span>
            <span class="n">flare_center_y</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">src_radius</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">,</span>
            <span class="n">circles</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">angle</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angle_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_upper</span><span class="p">)</span>

        <span class="n">flare_center_x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_x</span><span class="p">)</span>
        <span class="n">flare_center_y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_y</span><span class="p">)</span>

        <span class="n">flare_center_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">*</span> <span class="n">flare_center_x</span><span class="p">)</span>
        <span class="n">flare_center_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="n">flare_center_y</span><span class="p">)</span>

        <span class="n">num_circles</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_lower</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_upper</span><span class="p">)</span>

        <span class="n">circles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">def</span> <span class="nf">line</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">flare_center_x</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">flare_center_y</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">t_val</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">flare_center_x</span><span class="p">,</span> <span class="n">width</span> <span class="o">-</span> <span class="n">flare_center_x</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
            <span class="n">rand_x</span><span class="p">,</span> <span class="n">rand_y</span> <span class="o">=</span> <span class="n">line</span><span class="p">(</span><span class="n">t_val</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_x</span><span class="p">)</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rand_y</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_circles</span><span class="p">):</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">rad</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">height</span> <span class="o">//</span> <span class="mi">100</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

            <span class="n">r_color</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">g_color</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">b_color</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

            <span class="n">circles</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="p">(</span>
                    <span class="n">alpha</span><span class="p">,</span>
                    <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">r</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">r</span><span class="p">])),</span>
                    <span class="nb">pow</span><span class="p">(</span><span class="n">rad</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">r_color</span><span class="p">,</span> <span class="n">g_color</span><span class="p">,</span> <span class="n">b_color</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="p">]</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"circles"</span><span class="p">:</span> <span class="n">circles</span><span class="p">,</span>
            <span class="s2">"flare_center_x"</span><span class="p">:</span> <span class="n">flare_center_x</span><span class="p">,</span>
            <span class="s2">"flare_center_y"</span><span class="p">:</span> <span class="n">flare_center_y</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"flare_roi"</span><span class="p">:</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_x</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_lower_y</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_x</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flare_center_upper_y</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="s2">"angle_lower"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_lower</span><span class="p">,</span>
            <span class="s2">"angle_upper"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_upper</span><span class="p">,</span>
            <span class="s2">"num_flare_circles_lower"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_lower</span><span class="p">,</span>
            <span class="s2">"num_flare_circles_upper"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_flare_circles_upper</span><span class="p">,</span>
            <span class="s2">"src_radius"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">src_radius</span><span class="p">,</span>
            <span class="s2">"src_color"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">src_color</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RandomToneCurve" id="albumentations.augmentations.transforms.RandomToneCurve">
<code>class <strong>
RandomToneCurve</strong></code>
<code>


    (scale=0.1, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L966" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RandomToneCurve" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Randomly change the relationship between bright and dark areas of the image by manipulating its tone curve.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scale</code></td>
<td><code>float</code></td>
<td><p>standard deviation of the normal distribution.
Used to sample random distances to move two control points that modify the image's curve.
Values should be in range [0, 1]. Default: 0.1</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RandomToneCurve</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Randomly change the relationship between bright and dark areas of the image by manipulating its tone curve.</span>

<span class="sd">    Args:</span>
<span class="sd">        scale: standard deviation of the normal distribution.</span>
<span class="sd">            Used to sample random distances to move two control points that modify the image's curve.</span>
<span class="sd">            Values should be in range [0, 1]. Default: 0.1</span>


<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">low_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">high_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">move_tone_curve</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">low_y</span><span class="p">,</span> <span class="n">high_y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"low_y"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">random_utils</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="s2">"high_y"</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">random_utils</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"scale"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="RingingOvershoot" id="albumentations.augmentations.transforms.RingingOvershoot">
<code>class <strong>
RingingOvershoot</strong></code>
<code>


    (blur_limit=(7, 15), cutoff=(0.7853981633974483, 1.5707963267948966), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2387" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.RingingOvershoot" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Create ringing or overshoot artefacts by conlvolving image with 2D sinc filter.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>blur_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>maximum kernel size for sinc filter.
Should be in range [3, inf). Default: (7, 15).</p></td>
</tr>
<tr>
<td><code>cutoff</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>range to choose the cutoff frequency in radians.
Should be in range (0, np.pi)
Default: (np.pi / 4, np.pi / 2).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition reference">
<p class="admonition-title">Reference</p>
<p>dsp.stackexchange.com/questions/58301/2-d-circularly-symmetric-low-pass-filter
<a href="https://arxiv.org/abs/2107.10833" target="_blank">https://arxiv.org/abs/2107.10833</a></p>
</div>
<div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">RingingOvershoot</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Create ringing or overshoot artefacts by conlvolving image with 2D sinc filter.</span>

<span class="sd">    Args:</span>
<span class="sd">        blur_limit: maximum kernel size for sinc filter.</span>
<span class="sd">            Should be in range [3, inf). Default: (7, 15).</span>
<span class="sd">        cutoff: range to choose the cutoff frequency in radians.</span>
<span class="sd">            Should be in range (0, np.pi)</span>
<span class="sd">            Default: (np.pi / 4, np.pi / 2).</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Reference:</span>
<span class="sd">        dsp.stackexchange.com/questions/58301/2-d-circularly-symmetric-low-pass-filter</span>
<span class="sd">        https://arxiv.org/abs/2107.10833</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">blur_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
        <span class="n">cutoff</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">blur_limit</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutoff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">cutoff</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"cutoff"</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__check_values</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">))</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> values should be between </span><span class="si">{</span><span class="n">bounds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="n">ksize</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ksize</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Kernel size must be odd. Got: </span><span class="si">{</span><span class="n">ksize</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="n">cutoff</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">cutoff</span><span class="p">)</span>

        <span class="c1"># From dsp.stackexchange.com/questions/58301/2-d-circularly-symmetric-low-pass-filter</span>
        <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="n">divide</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">,</span> <span class="n">invalid</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">):</span>
            <span class="n">kernel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfunction</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">cutoff</span>
                <span class="o">*</span> <span class="n">special</span><span class="o">.</span><span class="n">j1</span><span class="p">(</span><span class="n">cutoff</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="p">(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
                <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="p">(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)),</span>
                <span class="p">[</span><span class="n">ksize</span><span class="p">,</span> <span class="n">ksize</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="n">kernel</span><span class="p">[(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ksize</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">cutoff</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

        <span class="c1"># Normalize kernel</span>
        <span class="n">kernel</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"kernel"</span><span class="p">:</span> <span class="n">kernel</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">kernel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">kernel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"blur_limit"</span><span class="p">,</span> <span class="s2">"cutoff"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Sharpen" id="albumentations.augmentations.transforms.Sharpen">
<code>class <strong>
Sharpen</strong></code>
<code>


    (alpha=(0.2, 0.5), lightness=(0.5, 1.0), always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2087" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Sharpen" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Sharpen the input image and overlays the result with the original image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alpha</code></td>
<td><code>Tuple[float, float]</code></td>
<td><p>range to choose the visibility of the sharpened image. At 0, only the original image is
visible, at 1.0 only its sharpened version is visible. Default: (0.2, 0.5).</p></td>
</tr>
<tr>
<td><code>lightness</code></td>
<td><code>Tuple[float, float]</code></td>
<td><p>range to choose the lightness of the sharpened image. Default: (0.5, 1.0).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Sharpen</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Sharpen the input image and overlays the result with the original image.</span>

<span class="sd">    Args:</span>
<span class="sd">        alpha: range to choose the visibility of the sharpened image. At 0, only the original image is</span>
<span class="sd">            visible, at 1.0 only its sharpened version is visible. Default: (0.2, 0.5).</span>
<span class="sd">        lightness: range to choose the lightness of the sharpened image. Default: (0.5, 1.0).</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">alpha</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="n">lightness</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"alpha"</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lightness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">lightness</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"lightness"</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__check_values</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">))</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> values should be between </span><span class="si">{</span><span class="n">bounds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__generate_sharpening_matrix</span><span class="p">(</span><span class="n">alpha_sample</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">lightness_sample</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="n">matrix_nochange</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">matrix_effect</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">lightness_sample</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]],</span>
            <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">alpha_sample</span><span class="p">)</span> <span class="o">*</span> <span class="n">matrix_nochange</span> <span class="o">+</span> <span class="n">alpha_sample</span> <span class="o">*</span> <span class="n">matrix_effect</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">)</span>
        <span class="n">lightness</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">lightness</span><span class="p">)</span>
        <span class="n">sharpening_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__generate_sharpening_matrix</span><span class="p">(</span><span class="n">alpha_sample</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">lightness_sample</span><span class="o">=</span><span class="n">lightness</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"sharpening_matrix"</span><span class="p">:</span> <span class="n">sharpening_matrix</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">sharpening_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sharpening_matrix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"alpha"</span><span class="p">,</span> <span class="s2">"lightness"</span><span class="p">)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Solarize" id="albumentations.augmentations.transforms.Solarize">
<code>class <strong>
Solarize</strong></code>
<code>


    (threshold=128, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1056" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Solarize" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Invert all pixel values above a threshold.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>threshold</code></td>
<td><code>Union[float, Tuple[float, float], int, Tuple[int, int]]</code></td>
<td><p>range for solarizing threshold.
If threshold is a single value, the range will be [threshold, threshold]. Default: 128.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    any</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Solarize</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Invert all pixel values above a threshold.</span>

<span class="sd">    Args:</span>
<span class="sd">        threshold: range for solarizing threshold.</span>
<span class="sd">            If threshold is a single value, the range will be [threshold, threshold]. Default: 128.</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        any</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="n">ScaleType</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">low</span><span class="o">=</span><span class="n">threshold</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">threshold</span><span class="p">,</span> <span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">solarize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">threshold</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"threshold"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"threshold"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Spatter" id="albumentations.augmentations.transforms.Spatter">
<code>class <strong>
Spatter</strong></code>
<code>


    (mean=0.65, std=0.3, gauss_sigma=2, cutout_threshold=0.68, intensity=0.6, mode='rain', color=None, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2654" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Spatter" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Apply spatter transform. It simulates corruption which can occlude a lens in the form of rain or mud.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mean</code></td>
<td><code>float, or tuple of floats</code></td>
<td><p>Mean value of normal distribution for generating liquid layer.
If single float it will be used as mean.
If tuple of float mean will be sampled from range <code>[mean[0], mean[1])</code>. Default: (0.65).</p></td>
</tr>
<tr>
<td><code>std</code></td>
<td><code>float, or tuple of floats</code></td>
<td><p>Standard deviation value of normal distribution for generating liquid layer.
If single float it will be used as std.
If tuple of float std will be sampled from range <code>[std[0], std[1])</code>. Default: (0.3).</p></td>
</tr>
<tr>
<td><code>gauss_sigma</code></td>
<td><code>float, or tuple of floats</code></td>
<td><p>Sigma value for gaussian filtering of liquid layer.
If single float it will be used as gauss_sigma.
If tuple of float gauss_sigma will be sampled from range <code>[sigma[0], sigma[1])</code>. Default: (2).</p></td>
</tr>
<tr>
<td><code>cutout_threshold</code></td>
<td><code>float, or tuple of floats</code></td>
<td><p>Threshold for filtering liqued layer
(determines number of drops). If single float it will used as cutout_threshold.
If tuple of float cutout_threshold will be sampled from range <code>[cutout_threshold[0], cutout_threshold[1])</code>.
Default: (0.68).</p></td>
</tr>
<tr>
<td><code>intensity</code></td>
<td><code>float, or tuple of floats</code></td>
<td><p>Intensity of corruption.
If single float it will be used as intensity.
If tuple of float intensity will be sampled from range <code>[intensity[0], intensity[1])</code>. Default: (0.6).</p></td>
</tr>
<tr>
<td><code>mode</code></td>
<td><code>string, or list of strings</code></td>
<td><p>Type of corruption. Currently, supported options are 'rain' and 'mud'.
 If list is provided type of corruption will be sampled list. Default: ("rain").</p></td>
</tr>
<tr>
<td><code>color</code></td>
<td><code>list of (r, g, b) or dict or None</code></td>
<td><p>Corruption elements color.
If list uses provided list as color for specified mode.
If dict uses provided color for specified mode. Color for each specified mode should be provided in dict.
If None uses default colors (rain: (238, 238, 175), mud: (20, 42, 63)).</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<p>Reference:
|  <a href="https://arxiv.org/pdf/1903.12261.pdf" target="_blank">https://arxiv.org/pdf/1903.12261.pdf</a>
|  <a href="https://github.com/hendrycks/robustness/blob/master/ImageNet-C/create_c/make_imagenet_c.py" target="_blank">https://github.com/hendrycks/robustness/blob/master/ImageNet-C/create_c/make_imagenet_c.py</a></p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Spatter</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Apply spatter transform. It simulates corruption which can occlude a lens in the form of rain or mud.</span>

<span class="sd">    Args:</span>
<span class="sd">        mean (float, or tuple of floats): Mean value of normal distribution for generating liquid layer.</span>
<span class="sd">            If single float it will be used as mean.</span>
<span class="sd">            If tuple of float mean will be sampled from range `[mean[0], mean[1])`. Default: (0.65).</span>
<span class="sd">        std (float, or tuple of floats): Standard deviation value of normal distribution for generating liquid layer.</span>
<span class="sd">            If single float it will be used as std.</span>
<span class="sd">            If tuple of float std will be sampled from range `[std[0], std[1])`. Default: (0.3).</span>
<span class="sd">        gauss_sigma (float, or tuple of floats): Sigma value for gaussian filtering of liquid layer.</span>
<span class="sd">            If single float it will be used as gauss_sigma.</span>
<span class="sd">            If tuple of float gauss_sigma will be sampled from range `[sigma[0], sigma[1])`. Default: (2).</span>
<span class="sd">        cutout_threshold (float, or tuple of floats): Threshold for filtering liqued layer</span>
<span class="sd">            (determines number of drops). If single float it will used as cutout_threshold.</span>
<span class="sd">            If tuple of float cutout_threshold will be sampled from range `[cutout_threshold[0], cutout_threshold[1])`.</span>
<span class="sd">            Default: (0.68).</span>
<span class="sd">        intensity (float, or tuple of floats): Intensity of corruption.</span>
<span class="sd">            If single float it will be used as intensity.</span>
<span class="sd">            If tuple of float intensity will be sampled from range `[intensity[0], intensity[1])`. Default: (0.6).</span>
<span class="sd">        mode (string, or list of strings): Type of corruption. Currently, supported options are 'rain' and 'mud'.</span>
<span class="sd">             If list is provided type of corruption will be sampled list. Default: ("rain").</span>
<span class="sd">        color (list of (r, g, b) or dict or None): Corruption elements color.</span>
<span class="sd">            If list uses provided list as color for specified mode.</span>
<span class="sd">            If dict uses provided color for specified mode. Color for each specified mode should be provided in dict.</span>
<span class="sd">            If None uses default colors (rain: (238, 238, 175), mud: (20, 42, 63)).</span>
<span class="sd">        p (float): probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    Reference:</span>
<span class="sd">    |  https://arxiv.org/pdf/1903.12261.pdf</span>
<span class="sd">    |  https://github.com/hendrycks/robustness/blob/master/ImageNet-C/create_c/make_imagenet_c.py</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mean</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.65</span><span class="p">,</span>
        <span class="n">std</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
        <span class="n">gauss_sigma</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">cutout_threshold</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.68</span><span class="p">,</span>
        <span class="n">intensity</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">SpatterMode</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">SpatterMode</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">"rain"</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="o">=</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mean</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">mean</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="n">std</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gauss_sigma</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">gauss_sigma</span><span class="p">,</span> <span class="n">gauss_sigma</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intensity</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span> <span class="n">intensity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutout_threshold</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">cutout_threshold</span><span class="p">,</span> <span class="n">cutout_threshold</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">color</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="s2">"rain"</span><span class="p">:</span> <span class="p">[</span><span class="mi">238</span><span class="p">,</span> <span class="mi">238</span><span class="p">,</span> <span class="mi">175</span><span class="p">],</span>
                <span class="s2">"mud"</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">63</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="k">else</span> <span class="p">[</span><span class="n">mode</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported color: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">. Please specify color for each mode (use dict for it)."</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"rain"</span><span class="p">,</span> <span class="s2">"mud"</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported color mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">. Transform supports only `rain` and `mud` mods."</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Wrong color definition: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">. Color for mode: </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> not specified."</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">!=</span> <span class="n">THREE</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">"Unsupported color: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2"> for mode </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. Color should be presented in RGB format."</span>
                    <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">)</span> <span class="o">!=</span> <span class="n">THREE</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported color: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">. Color should be presented in RGB format."</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">non_mud</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mud</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">drops</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">SpatterMode</span> <span class="o">=</span> <span class="s2">"mud"</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">spatter</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">non_mud</span><span class="p">,</span> <span class="n">mud</span><span class="p">,</span> <span class="n">drops</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">mean</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">std</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">std</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">std</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">cutout_threshold</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cutout_threshold</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">cutout_threshold</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">sigma</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gauss_sigma</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">gauss_sigma</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="n">intensity</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">intensity</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">intensity</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">[</span><span class="n">mode</span><span class="p">])</span> <span class="o">/</span> <span class="mf">255.0</span>

        <span class="n">liquid_layer</span> <span class="o">=</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">std</span><span class="p">)</span>
        <span class="n">liquid_layer</span> <span class="o">=</span> <span class="n">gaussian_filter</span><span class="p">(</span><span class="n">liquid_layer</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"nearest"</span><span class="p">)</span>
        <span class="n">liquid_layer</span><span class="p">[</span><span class="n">liquid_layer</span> <span class="o">&lt;</span> <span class="n">cutout_threshold</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">"rain"</span><span class="p">:</span>
            <span class="n">liquid_layer</span> <span class="o">=</span> <span class="p">(</span><span class="n">liquid_layer</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">cv2</span><span class="o">.</span><span class="n">Canny</span><span class="p">(</span><span class="n">liquid_layer</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">distanceTransform</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">DIST_L2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">THRESH_TRUNC</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">blur</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">equalize</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>

            <span class="n">ker</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">F</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="n">dist</span> <span class="o">=</span> <span class="n">blur</span><span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

            <span class="n">m</span> <span class="o">=</span> <span class="n">liquid_layer</span> <span class="o">*</span> <span class="n">dist</span>
            <span class="n">m</span> <span class="o">*=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

            <span class="n">drops</span> <span class="o">=</span> <span class="n">m</span><span class="p">[:,</span> <span class="p">:,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">color</span> <span class="o">*</span> <span class="n">intensity</span>
            <span class="n">mud</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">non_mud</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">liquid_layer</span> <span class="o">&gt;</span> <span class="n">cutout_threshold</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">gaussian_filter</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">"nearest"</span><span class="p">)</span>
            <span class="n">m</span><span class="p">[</span><span class="n">m</span> <span class="o">&lt;</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">cutout_threshold</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>

            <span class="n">mud</span> <span class="o">=</span> <span class="n">m</span> <span class="o">*</span> <span class="n">color</span>
            <span class="n">non_mud</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">m</span>
            <span class="n">drops</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"non_mud"</span><span class="p">:</span> <span class="n">non_mud</span><span class="p">,</span>
            <span class="s2">"mud"</span><span class="p">:</span> <span class="n">mud</span><span class="p">,</span>
            <span class="s2">"drops"</span><span class="p">:</span> <span class="n">drops</span><span class="p">,</span>
            <span class="s2">"mode"</span><span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">"mean"</span><span class="p">,</span> <span class="s2">"std"</span><span class="p">,</span> <span class="s2">"gauss_sigma"</span><span class="p">,</span> <span class="s2">"intensity"</span><span class="p">,</span> <span class="s2">"cutout_threshold"</span><span class="p">,</span> <span class="s2">"mode"</span><span class="p">,</span> <span class="s2">"color"</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="Superpixels" id="albumentations.augmentations.transforms.Superpixels">
<code>class <strong>
Superpixels</strong></code>
<code>


    (p_replace=0.1, n_segments=100, max_size=128, interpolation=1, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2233" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.Superpixels" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Transform images partially/completely to their superpixel representation.
This implementation uses skimage's version of the SLIC algorithm.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p_replace</code></td>
<td><code>float or tuple of float</code></td>
<td><p>Defines for any segment the probability that the pixels within that
segment are replaced by their average color (otherwise, the pixels are not changed).</p></td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<ul>
<li>A probability of <code>0.0</code> would mean, that the pixels in no
  segment are replaced by their average color (image is not
  changed at all).</li>
<li>A probability of <code>0.5</code> would mean, that around half of all
  segments are replaced by their average color.</li>
<li>A probability of <code>1.0</code> would mean, that all segments are
  replaced by their average color (resulting in a voronoi
  image).</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="w">    </span><span class="n">Behaviour</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">chosen</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">types</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">parameter</span><span class="o">:</span>
<span class="w">        </span><span class="o">*</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="kt">float</span><span class="n n-Quoted">``</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="n">flat</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">always</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="p">.</span>
<span class="w">        </span><span class="o">*</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="n">tuple</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="n n-Quoted">``</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">random</span><span class="w"> </span><span class="n">probability</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span>
<span class="w">          </span><span class="n">sampled</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">interval</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="err">[</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="err">]</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">image</span><span class="p">.</span>
<span class="n">n_segments</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">tuple</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Rough</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">many</span><span class="w"> </span><span class="n">superpixels</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="p">(</span><span class="n">the</span><span class="w"> </span><span class="k">algorithm</span>
<span class="w">    </span><span class="n">may</span><span class="w"> </span><span class="n">deviate</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">number</span><span class="p">).</span><span class="w"> </span><span class="n">Lower</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">lead</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">coarser</span><span class="w"> </span><span class="n">superpixels</span><span class="p">.</span>
<span class="w">    </span><span class="n">Higher</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">computationally</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">intensive</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">hence</span><span class="w"> </span><span class="k">lead</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">slowdown</span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">single</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="kt">int</span><span class="n n-Quoted">``</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">always</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span>
<span class="w">      </span><span class="k">number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">segments</span><span class="p">.</span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="k">If</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="n">tuple</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="n n-Quoted">``</span><span class="p">,</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">discrete</span>
<span class="w">      </span><span class="k">interval</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="err">[</span><span class="n">a</span><span class="p">..</span><span class="n">b</span><span class="err">]</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">sampled</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">image</span><span class="p">.</span>
<span class="k">max_size</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">None</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Maximum</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="k">at</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">augmentation</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">performed</span><span class="p">.</span>
<span class="w">    </span><span class="k">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">exceeds</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span>
<span class="w">    </span><span class="n">downscaled</span><span class="w"> </span><span class="k">before</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">augmentation</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">longest</span><span class="w"> </span><span class="n">side</span><span class="w"> </span><span class="n">matches</span><span class="w"> </span><span class="n n-Quoted">`max_size`</span><span class="p">.</span>
<span class="w">    </span><span class="n">This</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">done</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">process</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">image</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">image</span><span class="p">.</span>
<span class="w">    </span><span class="n">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="n n-Quoted">`p_replace`</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="mf">1.0</span><span class="n n-Quoted">``</span><span class="p">,</span>
<span class="w">    </span><span class="n">the</span><span class="w"> </span><span class="n">down</span><span class="o">-/</span><span class="n">upscaling</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">affect</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">not</span><span class="o">-</span><span class="n">replaced</span><span class="w"> </span><span class="n">pixels</span><span class="w"> </span><span class="n">too</span><span class="p">.</span>
<span class="w">    </span><span class="k">Use</span><span class="w"> </span><span class="n n-Quoted">``</span><span class="k">None</span><span class="n n-Quoted">``</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">down</span><span class="o">-/</span><span class="n">upscaling</span><span class="p">.</span>
<span class="n">interpolation</span><span class="w"> </span><span class="p">(</span><span class="n">OpenCV</span><span class="w"> </span><span class="n">flag</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">interpolation</span><span class="w"> </span><span class="k">algorithm</span><span class="p">.</span><span class="w"> </span><span class="n">Should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="k">one</span><span class="w"> </span><span class="k">of</span><span class="o">:</span>
<span class="w">    </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_NEAREST</span><span class="p">,</span><span class="w"> </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_LINEAR</span><span class="p">,</span><span class="w"> </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_CUBIC</span><span class="p">,</span><span class="w"> </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_AREA</span><span class="p">,</span><span class="w"> </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_LANCZOS4</span><span class="p">.</span>
<span class="w">    </span><span class="k">Default</span><span class="o">:</span><span class="w"> </span><span class="n">cv2</span><span class="p">.</span><span class="n">INTER_LINEAR</span><span class="p">.</span>
<span class="n">p</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">probability</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">applying</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">transform</span><span class="p">.</span><span class="w"> </span><span class="k">Default</span><span class="o">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">.</span>
</code></pre></div>
<div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">Superpixels</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Transform images partially/completely to their superpixel representation.</span>
<span class="sd">    This implementation uses skimage's version of the SLIC algorithm.</span>

<span class="sd">    Args:</span>
<span class="sd">        p_replace (float or tuple of float): Defines for any segment the probability that the pixels within that</span>
<span class="sd">            segment are replaced by their average color (otherwise, the pixels are not changed).</span>

<span class="sd">    Examples:</span>
<span class="sd">                * A probability of ``0.0`` would mean, that the pixels in no</span>
<span class="sd">                  segment are replaced by their average color (image is not</span>
<span class="sd">                  changed at all).</span>
<span class="sd">                * A probability of ``0.5`` would mean, that around half of all</span>
<span class="sd">                  segments are replaced by their average color.</span>
<span class="sd">                * A probability of ``1.0`` would mean, that all segments are</span>
<span class="sd">                  replaced by their average color (resulting in a voronoi</span>
<span class="sd">                  image).</span>
<span class="sd">            Behaviour based on chosen data types for this parameter:</span>
<span class="sd">                * If a ``float``, then that ``flat`` will always be used.</span>
<span class="sd">                * If ``tuple`` ``(a, b)``, then a random probability will be</span>
<span class="sd">                  sampled from the interval ``[a, b]`` per image.</span>
<span class="sd">        n_segments (int, or tuple of int): Rough target number of how many superpixels to generate (the algorithm</span>
<span class="sd">            may deviate from this number). Lower value will lead to coarser superpixels.</span>
<span class="sd">            Higher values are computationally more intensive and will hence lead to a slowdown</span>
<span class="sd">            * If a single ``int``, then that value will always be used as the</span>
<span class="sd">              number of segments.</span>
<span class="sd">            * If a ``tuple`` ``(a, b)``, then a value from the discrete</span>
<span class="sd">              interval ``[a..b]`` will be sampled per image.</span>
<span class="sd">        max_size (int or None): Maximum image size at which the augmentation is performed.</span>
<span class="sd">            If the width or height of an image exceeds this value, it will be</span>
<span class="sd">            downscaled before the augmentation so that the longest side matches `max_size`.</span>
<span class="sd">            This is done to speed up the process. The final output image has the same size as the input image.</span>
<span class="sd">            Note that in case `p_replace` is below ``1.0``,</span>
<span class="sd">            the down-/upscaling will affect the not-replaced pixels too.</span>
<span class="sd">            Use ``None`` to apply no down-/upscaling.</span>
<span class="sd">        interpolation (OpenCV flag): flag that is used to specify the interpolation algorithm. Should be one of:</span>
<span class="sd">            cv2.INTER_NEAREST, cv2.INTER_LINEAR, cv2.INTER_CUBIC, cv2.INTER_AREA, cv2.INTER_LANCZOS4.</span>
<span class="sd">            Default: cv2.INTER_LINEAR.</span>
<span class="sd">        p (float): probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">p_replace</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="n">n_segments</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">max_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
        <span class="n">interpolation</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_LINEAR</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="o">=</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">p_replace</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">p_replace</span><span class="p">,</span> <span class="n">p_replace</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_segments</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">n_segments</span><span class="p">,</span> <span class="n">n_segments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span> <span class="o">=</span> <span class="n">max_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span> <span class="o">=</span> <span class="n">interpolation</span>

        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_segments</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"n_segments must be &gt;= 1. Got: </span><span class="si">{</span><span class="n">n_segments</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"p_replace"</span><span class="p">,</span> <span class="s2">"n_segments"</span><span class="p">,</span> <span class="s2">"max_size"</span><span class="p">,</span> <span class="s2">"interpolation"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">n_segments</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">n_segments</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">p_replace</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"replace_samples"</span><span class="p">:</span> <span class="n">random_utils</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n_segments</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">,</span> <span class="s2">"n_segments"</span><span class="p">:</span> <span class="n">n_segments</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">replace_samples</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,),</span> <span class="n">n_segments</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">superpixels</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">n_segments</span><span class="p">,</span> <span class="n">replace_samples</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_size</span><span class="p">,</span> <span class="n">cast</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolation</span><span class="p">))</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="TemplateTransform" id="albumentations.augmentations.transforms.TemplateTransform">
<code>class <strong>
TemplateTransform</strong></code>
<code>


    (templates, img_weight=0.5, template_weight=0.5, template_transform=None, name=None, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2284" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.TemplateTransform" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Apply blending of input image with specified templates</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>templates</code></td>
<td><code>numpy array or list of numpy arrays</code></td>
<td><p>Images as template for transform.</p></td>
</tr>
<tr>
<td><code>img_weight</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>If single float will be used as weight for input image.
If tuple of float img_weight will be in range <code>[img_weight[0], img_weight[1])</code>. Default: 0.5.</p></td>
</tr>
<tr>
<td><code>template_weight</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>If single float will be used as weight for template.
If tuple of float template_weight will be in range <code>[template_weight[0], template_weight[1])</code>.
Default: 0.5.</p></td>
</tr>
<tr>
<td><code>template_transform</code></td>
<td><code>Optional[Callable[..., Any]]</code></td>
<td><p>transformation object which could be applied to template,
must produce template the same size as input image.</p></td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>Optional[str]</code></td>
<td><p>(Optional) Name of transform, used only for deserialization.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">TemplateTransform</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Apply blending of input image with specified templates</span>
<span class="sd">    Args:</span>
<span class="sd">        templates (numpy array or list of numpy arrays): Images as template for transform.</span>
<span class="sd">        img_weight: If single float will be used as weight for input image.</span>
<span class="sd">            If tuple of float img_weight will be in range `[img_weight[0], img_weight[1])`. Default: 0.5.</span>
<span class="sd">        template_weight: If single float will be used as weight for template.</span>
<span class="sd">            If tuple of float template_weight will be in range `[template_weight[0], template_weight[1])`.</span>
<span class="sd">            Default: 0.5.</span>
<span class="sd">        template_transform: transformation object which could be applied to template,</span>
<span class="sd">            must produce template the same size as input image.</span>
<span class="sd">        name: (Optional) Name of transform, used only for deserialization.</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>
<span class="sd">    Targets:</span>
<span class="sd">        image</span>
<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">templates</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]],</span>
        <span class="n">img_weight</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">template_weight</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">template_transform</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">templates</span> <span class="o">=</span> <span class="n">templates</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">templates</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="k">else</span> <span class="p">[</span><span class="n">templates</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">img_weight</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">img_weight</span><span class="p">,</span> <span class="n">img_weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_weight</span> <span class="o">=</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">template_weight</span><span class="p">,</span> <span class="n">template_weight</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_transform</span> <span class="o">=</span> <span class="n">template_transform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">img_weight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">template_weight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">add_weighted</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">img_weight</span><span class="p">,</span> <span class="n">template</span><span class="p">,</span> <span class="n">template_weight</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"img_weight"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_weight</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_weight</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s2">"template_weight"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">template_weight</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_weight</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">get_params_dependent_on_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">templates</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_transform</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">template</span><span class="p">)[</span><span class="s2">"image"</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">template</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">img</span><span class="p">)]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">"Template must be a single channel or "</span>
                <span class="s2">"has the same number of channels as input image (</span><span class="si">{}</span><span class="s2">), got </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">get_num_channels</span><span class="p">(</span><span class="n">img</span><span class="p">),</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"Image and template must be the same image type"</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="n">template</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Image and template must be the same size, got </span><span class="si">{</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">template</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">template</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">img</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">template</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">template</span><span class="p">,)</span> <span class="o">*</span> <span class="n">get_num_channels</span><span class="p">(</span><span class="n">img</span><span class="p">),</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># in order to support grayscale image with dummy dim</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">"template"</span><span class="p">:</span> <span class="n">template</span><span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">is_serializable</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">targets_as_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">"image"</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">to_dict_private</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">"To make a TemplateTransform serializable you should provide the `name` argument, "</span>
                <span class="s2">"e.g. `TemplateTransform(name='my_transform', ...)`."</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">"__class_fullname__"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_class_fullname</span><span class="p">(),</span> <span class="s2">"__name__"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ToFloat" id="albumentations.augmentations.transforms.ToFloat">
<code>class <strong>
ToFloat</strong></code>
<code>


    (max_value=None, always_apply=False, p=1.0)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1645" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ToFloat" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Divide pixel values by <code>max_value</code> to get a float32 output array where all values lie in the range [0, 1.0].
If <code>max_value</code> is None the transform will try to infer the maximum value by inspecting the data type of the input
image.</p>
<p>See Also:
    :class:<code>~albumentations.augmentations.transforms.FromFloat</code></p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>max_value</code></td>
<td><code>Optional[float]</code></td>
<td><p>maximum possible input value. Default: None.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 1.0.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    any type</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ToFloat</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Divide pixel values by `max_value` to get a float32 output array where all values lie in the range [0, 1.0].</span>
<span class="sd">    If `max_value` is None the transform will try to infer the maximum value by inspecting the data type of the input</span>
<span class="sd">    image.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :class:`~albumentations.augmentations.transforms.FromFloat`</span>

<span class="sd">    Args:</span>
<span class="sd">        max_value: maximum possible input value. Default: None.</span>
<span class="sd">        p: probability of applying the transform. Default: 1.0.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        any type</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span> <span class="o">=</span> <span class="n">max_value</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">to_float</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s2">"max_value"</span><span class="p">,)</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ToGray" id="albumentations.augmentations.transforms.ToGray">
<code>class <strong>
ToGray</strong></code>
<code>
</code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1550" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ToGray" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Convert the input RGB image to grayscale. If the mean pixel value for the resulting image is greater
than 127, invert the resulting grayscale image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p</code></td>
<td></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ToGray</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Convert the input RGB image to grayscale. If the mean pixel value for the resulting image is greater</span>
<span class="sd">    than 127, invert the resulting grayscale image.</span>

<span class="sd">    Args:</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"The image is already gray."</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">img</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"ToGray transformation expects 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">to_gray</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[()]:</span>
        <span class="k">return</span> <span class="p">()</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ToRGB" id="albumentations.augmentations.transforms.ToRGB">
<code>class <strong>
ToRGB</strong></code>
<code>


    (always_apply=True, p=1.0)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1578" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ToRGB" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Convert the input grayscale image to RGB.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 1.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ToRGB</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Convert the input grayscale image to RGB.</span>

<span class="sd">    Args:</span>
<span class="sd">        p: probability of applying the transform. Default: 1.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="o">=</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">"The image is already an RGB."</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">img</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_grayscale_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"ToRGB transformation expects 2-dim images or 3-dim with the last dimension equal to 1."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">gray_to_rgb</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[()]:</span>
        <span class="k">return</span> <span class="p">()</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="ToSepia" id="albumentations.augmentations.transforms.ToSepia">
<code>class <strong>
ToSepia</strong></code>
<code>


    (always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L1609" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.ToSepia" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Applies sepia filter to the input RGB image</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<p>Image types:
    uint8, float32</p>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">ToSepia</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Applies sepia filter to the input RGB image</span>

<span class="sd">    Args:</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    Image types:</span>
<span class="sd">        uint8, float32</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sepia_transformation_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[[</span><span class="mf">0.393</span><span class="p">,</span> <span class="mf">0.769</span><span class="p">,</span> <span class="mf">0.189</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.349</span><span class="p">,</span> <span class="mf">0.686</span><span class="p">,</span> <span class="mf">0.168</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.272</span><span class="p">,</span> <span class="mf">0.534</span><span class="p">,</span> <span class="mf">0.131</span><span class="p">]]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_rgb_image</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"ToSepia transformation expects 3-channel images."</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">linear_transformation_rgb</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sepia_transformation_matrix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[()]:</span>
        <span class="k">return</span> <span class="p">()</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" data-toc-label="UnsharpMask" id="albumentations.augmentations.transforms.UnsharpMask">
<code>class <strong>
UnsharpMask</strong></code>
<code>


    (blur_limit=(3, 7), sigma_limit=0.0, alpha=(0.2, 0.5), threshold=10, always_apply=False, p=0.5)


                </code> <span class="doc-github-link">
<a href="https://github.com/albumentations-team/albumentations/blob/master/albumentations/augmentations/transforms.py#L2463" target="_blank">[view source on GitHub]</a>
</span><a class="headerlink" href="#albumentations.augmentations.transforms.UnsharpMask" title="Permanent link">¶</a>
</h2>
<div class="class-signature">
</div>
<div class="doc doc-contents">
<p>Sharpen the input image using Unsharp Masking processing and overlays the result with the original image.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>blur_limit</code></td>
<td><code>Union[int, Tuple[int, int]]</code></td>
<td><p>maximum Gaussian kernel size for blurring the input image.
Must be zero or odd and in range [0, inf). If set to 0 it will be computed from sigma
as <code>round(sigma * (3 if img.dtype == np.uint8 else 4) * 2 + 1) + 1</code>.
If set single value <code>blur_limit</code> will be in range (0, blur_limit).
Default: (3, 7).</p></td>
</tr>
<tr>
<td><code>sigma_limit</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>Gaussian kernel standard deviation. Must be in range [0, inf).
If set single value <code>sigma_limit</code> will be in range (0, sigma_limit).
If set to 0 sigma will be computed as <code>sigma = 0.3*((ksize-1)*0.5 - 1) + 0.8</code>. Default: 0.</p></td>
</tr>
<tr>
<td><code>alpha</code></td>
<td><code>Union[float, Tuple[float, float]]</code></td>
<td><p>range to choose the visibility of the sharpened image.
At 0, only the original image is visible, at 1.0 only its sharpened version is visible.
Default: (0.2, 0.5).</p></td>
</tr>
<tr>
<td><code>threshold</code></td>
<td><code>int</code></td>
<td><p>Value to limit sharpening only for areas with high pixel difference between original image
and it's smoothed version. Higher threshold means less sharpening on flat areas.
Must be in range [0, 255]. Default: 10.</p></td>
</tr>
<tr>
<td><code>p</code></td>
<td><code>float</code></td>
<td><p>probability of applying the transform. Default: 0.5.</p></td>
</tr>
</tbody>
</table> <div class="admonition reference">
<p class="admonition-title">Reference</p>
<p>arxiv.org/pdf/2107.10833.pdf</p>
</div>
<div class="admonition targets">
<p class="admonition-title">Targets</p>
<p>image</p>
</div>
<details class="quote">
<summary>Source code in <code>albumentations/augmentations/transforms.py</code></summary>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">UnsharpMask</span><span class="p">(</span><span class="n">ImageOnlyTransform</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Sharpen the input image using Unsharp Masking processing and overlays the result with the original image.</span>

<span class="sd">    Args:</span>
<span class="sd">        blur_limit: maximum Gaussian kernel size for blurring the input image.</span>
<span class="sd">            Must be zero or odd and in range [0, inf). If set to 0 it will be computed from sigma</span>
<span class="sd">            as `round(sigma * (3 if img.dtype == np.uint8 else 4) * 2 + 1) + 1`.</span>
<span class="sd">            If set single value `blur_limit` will be in range (0, blur_limit).</span>
<span class="sd">            Default: (3, 7).</span>
<span class="sd">        sigma_limit: Gaussian kernel standard deviation. Must be in range [0, inf).</span>
<span class="sd">            If set single value `sigma_limit` will be in range (0, sigma_limit).</span>
<span class="sd">            If set to 0 sigma will be computed as `sigma = 0.3*((ksize-1)*0.5 - 1) + 0.8`. Default: 0.</span>
<span class="sd">        alpha: range to choose the visibility of the sharpened image.</span>
<span class="sd">            At 0, only the original image is visible, at 1.0 only its sharpened version is visible.</span>
<span class="sd">            Default: (0.2, 0.5).</span>
<span class="sd">        threshold: Value to limit sharpening only for areas with high pixel difference between original image</span>
<span class="sd">            and it's smoothed version. Higher threshold means less sharpening on flat areas.</span>
<span class="sd">            Must be in range [0, 255]. Default: 10.</span>
<span class="sd">        p: probability of applying the transform. Default: 0.5.</span>

<span class="sd">    Reference:</span>
<span class="sd">        arxiv.org/pdf/2107.10833.pdf</span>

<span class="sd">    Targets:</span>
<span class="sd">        image</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">blur_limit</span><span class="p">:</span> <span class="n">ScaleIntType</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
        <span class="n">sigma_limit</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">alpha</span><span class="p">:</span> <span class="n">ScaleFloatType</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
        <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">always_apply</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">always_apply</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">to_tuple</span><span class="p">(</span><span class="n">blur_limit</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma_limit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">sigma_limit</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"sigma_limit"</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__check_values</span><span class="p">(</span><span class="n">to_tuple</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">"alpha"</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="n">threshold</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"blur_limit and sigma_limit minimum value can not be both equal to 0."</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">1</span>
        <span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">"UnsharpMask supports only odd blur limits."</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__check_values</span><span class="p">(</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">))</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> values should be between </span><span class="si">{</span><span class="n">bounds</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">get_params</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"ksize"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">blur_limit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s2">"sigma"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma_limit</span><span class="p">),</span>
            <span class="s2">"alpha"</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">),</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">ksize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">sigma</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">F</span><span class="o">.</span><span class="n">unsharp_mask</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">ksize</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="n">sigma</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">threshold</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_transform_init_args_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="s2">"blur_limit"</span><span class="p">,</span> <span class="s2">"sigma_limit"</span><span class="p">,</span> <span class="s2">"alpha"</span><span class="p">,</span> <span class="s2">"threshold"</span>
</code></pre></div>
</details>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>


              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="footer.title">
      
        <a href="../" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Index
            </div>
          </div>
        </a>
      
      
        <a href="../blur/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Index
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  

</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.top", "navigation.sections"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../../js/extra.js"></script>
      
    
  </body>
</html>